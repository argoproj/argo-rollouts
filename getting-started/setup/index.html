
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://argoproj.github.io/argo-rollouts/getting-started/setup/">
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.2.3, mkdocs-material-8.1.6">
    
    
      
        <title>Environment Setup - Argo Rollouts - Kubernetes Progressive Delivery Controller</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.cd566b2a.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.e6a45f82.min.css">
        
          
          
          <meta name="theme-color" content="#009485">
        
      
    
    
    
      
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Work+Sans:300,400,400i,700%7C&display=fallback">
        <style>:root{--md-text-font:"Work Sans";--md-code-font:""}</style>
      
    
    
      <link rel="stylesheet" href="../../assets/versions.css">
    
    <script>__md_scope=new URL("../..",location),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="teal" data-md-color-accent="">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#environment-set-up" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Argo Rollouts - Kubernetes Progressive Delivery Controller" class="md-header__button md-logo" aria-label="Argo Rollouts - Kubernetes Progressive Delivery Controller" data-md-component="logo">
      
  <img src="../../assets/logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Argo Rollouts - Kubernetes Progressive Delivery Controller
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Environment Setup
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/argoproj/argo-rollouts/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Argo Rollouts - Kubernetes Progressive Delivery Controller" class="md-nav__button md-logo" aria-label="Argo Rollouts - Kubernetes Progressive Delivery Controller" data-md-component="logo">
      
  <img src="../../assets/logo.png" alt="logo">

    </a>
    Argo Rollouts - Kubernetes Progressive Delivery Controller
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/argoproj/argo-rollouts/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        Overview
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../installation/" class="md-nav__link">
        Installation
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../concepts/" class="md-nav__link">
        Concepts
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../architecture/" class="md-nav__link">
        Architecture
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5" type="checkbox" id="__nav_5" >
      
      
      
      
        <label class="md-nav__link" for="__nav_5">
          Getting Started
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Getting Started" data-md-level="1">
        <label class="md-nav__title" for="__nav_5">
          <span class="md-nav__icon md-icon"></span>
          Getting Started
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../" class="md-nav__link">
        Basic Usage
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../ambassador/" class="md-nav__link">
        Ambassador
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../alb/" class="md-nav__link">
        AWS ALB
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../istio/" class="md-nav__link">
        Istio
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../nginx/" class="md-nav__link">
        NGINX
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../smi/" class="md-nav__link">
        SMI
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../dashboard/" class="md-nav__link">
        Dashboard
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7" type="checkbox" id="__nav_7" >
      
      
      
      
        <label class="md-nav__link" for="__nav_7">
          Rollout
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Rollout" data-md-level="1">
        <label class="md-nav__title" for="__nav_7">
          <span class="md-nav__icon md-icon"></span>
          Rollout
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7_1" type="checkbox" id="__nav_7_1" >
      
      
      
      
        <label class="md-nav__link" for="__nav_7_1">
          Deployment Strategies
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Deployment Strategies" data-md-level="2">
        <label class="md-nav__title" for="__nav_7_1">
          <span class="md-nav__icon md-icon"></span>
          Deployment Strategies
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../features/bluegreen/" class="md-nav__link">
        BlueGreen
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../features/canary/" class="md-nav__link">
        Canary
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../features/specification/" class="md-nav__link">
        Rollout Spec
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../features/hpa-support/" class="md-nav__link">
        HPA
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../features/ephemeral-metadata/" class="md-nav__link">
        Ephemeral Metadata
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../features/restart/" class="md-nav__link">
        Restarting Rollouts
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../features/scaledown-aborted-rs/" class="md-nav__link">
        Scaledown Aborted Rollouts
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../features/anti-affinity/anti-affinity/" class="md-nav__link">
        Anti Affinity
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../features/helm/" class="md-nav__link">
        Helm
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../features/kustomize/" class="md-nav__link">
        Kustomize
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../features/controller-metrics/" class="md-nav__link">
        Controller Metrics
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_8" type="checkbox" id="__nav_8" >
      
      
      
      
        <label class="md-nav__link" for="__nav_8">
          Traffic Management
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Traffic Management" data-md-level="1">
        <label class="md-nav__title" for="__nav_8">
          <span class="md-nav__icon md-icon"></span>
          Traffic Management
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../features/traffic-management/" class="md-nav__link">
        Overview
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../features/traffic-management/ambassador/" class="md-nav__link">
        Ambassador
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../features/traffic-management/alb/" class="md-nav__link">
        AWS ALB
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../features/traffic-management/istio/" class="md-nav__link">
        Istio
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../features/traffic-management/nginx/" class="md-nav__link">
        NGINX
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../features/traffic-management/smi/" class="md-nav__link">
        SMI
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_9" type="checkbox" id="__nav_9" >
      
      
      
      
        <label class="md-nav__link" for="__nav_9">
          Analysis
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Analysis" data-md-level="1">
        <label class="md-nav__title" for="__nav_9">
          <span class="md-nav__icon md-icon"></span>
          Analysis
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../features/analysis/" class="md-nav__link">
        Overview
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../analysis/prometheus/" class="md-nav__link">
        Prometheus
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../analysis/datadog/" class="md-nav__link">
        DataDog
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../analysis/newrelic/" class="md-nav__link">
        NewRelic
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../analysis/wavefront/" class="md-nav__link">
        Wavefront
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../analysis/job/" class="md-nav__link">
        Job
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../analysis/web/" class="md-nav__link">
        Web
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../analysis/kayenta/" class="md-nav__link">
        Kayenta
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../analysis/cloudwatch/" class="md-nav__link">
        CloudWatch
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../features/experiment/" class="md-nav__link">
        Experiments
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_11" type="checkbox" id="__nav_11" >
      
      
      
      
        <label class="md-nav__link" for="__nav_11">
          Notifications
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Notifications" data-md-level="1">
        <label class="md-nav__title" for="__nav_11">
          <span class="md-nav__icon md-icon"></span>
          Notifications
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../features/notifications/" class="md-nav__link">
        Overview
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_11_2" type="checkbox" id="__nav_11_2" >
      
      
      
      
        <label class="md-nav__link" for="__nav_11_2">
          Services
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Services" data-md-level="2">
        <label class="md-nav__title" for="__nav_11_2">
          <span class="md-nav__icon md-icon"></span>
          Services
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../generated/notification-services/alertmanager/" class="md-nav__link">
        Alertmanager
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../generated/notification-services/email/" class="md-nav__link">
        Email
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../generated/notification-services/github/" class="md-nav__link">
        GitHub
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../generated/notification-services/googlechat/" class="md-nav__link">
        Google Chat
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../generated/notification-services/grafana/" class="md-nav__link">
        Grafana
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../generated/notification-services/mattermost/" class="md-nav__link">
        Mattermost
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../generated/notification-services/opsgenie/" class="md-nav__link">
        Opsgenie
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../generated/notification-services/overview/" class="md-nav__link">
        Overview
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../generated/notification-services/pushover/" class="md-nav__link">
        Pushover
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../generated/notification-services/rocketchat/" class="md-nav__link">
        Rocket.Chat
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../generated/notification-services/slack/" class="md-nav__link">
        Slack
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../generated/notification-services/teams/" class="md-nav__link">
        Teams
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../generated/notification-services/telegram/" class="md-nav__link">
        Telegram
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../generated/notification-services/webhook/" class="md-nav__link">
        Webhook
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_12" type="checkbox" id="__nav_12" >
      
      
      
      
        <label class="md-nav__link" for="__nav_12">
          Kubectl Plugin
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Kubectl Plugin" data-md-level="1">
        <label class="md-nav__title" for="__nav_12">
          <span class="md-nav__icon md-icon"></span>
          Kubectl Plugin
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../features/kubectl-plugin/" class="md-nav__link">
        Overview
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_12_2" type="checkbox" id="__nav_12_2" >
      
      
      
      
        <label class="md-nav__link" for="__nav_12_2">
          Commands
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Commands" data-md-level="2">
        <label class="md-nav__title" for="__nav_12_2">
          <span class="md-nav__icon md-icon"></span>
          Commands
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../generated/kubectl-argo-rollouts/kubectl-argo-rollouts/" class="md-nav__link">
        Rollouts
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../generated/kubectl-argo-rollouts/kubectl-argo-rollouts_abort/" class="md-nav__link">
        Rollouts Abort
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../generated/kubectl-argo-rollouts/kubectl-argo-rollouts_completion/" class="md-nav__link">
        Rollouts Completion
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../generated/kubectl-argo-rollouts/kubectl-argo-rollouts_create/" class="md-nav__link">
        Rollouts Create
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../generated/kubectl-argo-rollouts/kubectl-argo-rollouts_create_analysisrun/" class="md-nav__link">
        Rollouts Create Analysisrun
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../generated/kubectl-argo-rollouts/kubectl-argo-rollouts_dashboard/" class="md-nav__link">
        Rollouts Dashboard
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../generated/kubectl-argo-rollouts/kubectl-argo-rollouts_get/" class="md-nav__link">
        Rollouts Get
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../generated/kubectl-argo-rollouts/kubectl-argo-rollouts_get_experiment/" class="md-nav__link">
        Rollouts Get Experiment
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../generated/kubectl-argo-rollouts/kubectl-argo-rollouts_get_rollout/" class="md-nav__link">
        Rollouts Get Rollout
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../generated/kubectl-argo-rollouts/kubectl-argo-rollouts_lint/" class="md-nav__link">
        Rollouts Lint
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../generated/kubectl-argo-rollouts/kubectl-argo-rollouts_list/" class="md-nav__link">
        Rollouts List
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../generated/kubectl-argo-rollouts/kubectl-argo-rollouts_list_experiments/" class="md-nav__link">
        Rollouts List Experiments
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../generated/kubectl-argo-rollouts/kubectl-argo-rollouts_list_rollouts/" class="md-nav__link">
        Rollouts List Rollouts
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../generated/kubectl-argo-rollouts/kubectl-argo-rollouts_notifications/" class="md-nav__link">
        Rollouts Notifications
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../generated/kubectl-argo-rollouts/kubectl-argo-rollouts_notifications_template/" class="md-nav__link">
        Rollouts Notifications Template
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../generated/kubectl-argo-rollouts/kubectl-argo-rollouts_notifications_template_get/" class="md-nav__link">
        Rollouts Notifications Template Get
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../generated/kubectl-argo-rollouts/kubectl-argo-rollouts_notifications_template_notify/" class="md-nav__link">
        Rollouts Notifications Template Notify
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../generated/kubectl-argo-rollouts/kubectl-argo-rollouts_notifications_trigger/" class="md-nav__link">
        Rollouts Notifications Trigger
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../generated/kubectl-argo-rollouts/kubectl-argo-rollouts_notifications_trigger_get/" class="md-nav__link">
        Rollouts Notifications Trigger Get
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../generated/kubectl-argo-rollouts/kubectl-argo-rollouts_notifications_trigger_run/" class="md-nav__link">
        Rollouts Notifications Trigger Run
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../generated/kubectl-argo-rollouts/kubectl-argo-rollouts_pause/" class="md-nav__link">
        Rollouts Pause
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../generated/kubectl-argo-rollouts/kubectl-argo-rollouts_promote/" class="md-nav__link">
        Rollouts Promote
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../generated/kubectl-argo-rollouts/kubectl-argo-rollouts_restart/" class="md-nav__link">
        Rollouts Restart
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../generated/kubectl-argo-rollouts/kubectl-argo-rollouts_retry/" class="md-nav__link">
        Rollouts Retry
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../generated/kubectl-argo-rollouts/kubectl-argo-rollouts_retry_experiment/" class="md-nav__link">
        Rollouts Retry Experiment
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../generated/kubectl-argo-rollouts/kubectl-argo-rollouts_retry_rollout/" class="md-nav__link">
        Rollouts Retry Rollout
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../generated/kubectl-argo-rollouts/kubectl-argo-rollouts_set/" class="md-nav__link">
        Rollouts Set
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../generated/kubectl-argo-rollouts/kubectl-argo-rollouts_set_image/" class="md-nav__link">
        Rollouts Set Image
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../generated/kubectl-argo-rollouts/kubectl-argo-rollouts_status/" class="md-nav__link">
        Rollouts Status
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../generated/kubectl-argo-rollouts/kubectl-argo-rollouts_terminate/" class="md-nav__link">
        Rollouts Terminate
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../generated/kubectl-argo-rollouts/kubectl-argo-rollouts_terminate_analysisrun/" class="md-nav__link">
        Rollouts Terminate Analysisrun
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../generated/kubectl-argo-rollouts/kubectl-argo-rollouts_terminate_experiment/" class="md-nav__link">
        Rollouts Terminate Experiment
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../generated/kubectl-argo-rollouts/kubectl-argo-rollouts_undo/" class="md-nav__link">
        Rollouts Undo
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../generated/kubectl-argo-rollouts/kubectl-argo-rollouts_version/" class="md-nav__link">
        Rollouts Version
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../best-practices/" class="md-nav__link">
        Best Practices
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../migrating/" class="md-nav__link">
        Migrating
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../FAQ/" class="md-nav__link">
        FAQ
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../security/" class="md-nav__link">
        Security
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../roadmap/" class="md-nav__link">
        Roadmap
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_18" type="checkbox" id="__nav_18" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_18">
          Contributing
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Contributing" data-md-level="1">
        <label class="md-nav__title" for="__nav_18">
          <span class="md-nav__icon md-icon"></span>
          Contributing
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../CONTRIBUTING/" class="md-nav__link">
        Contribution Guide
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Environment Setup
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Environment Setup
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#helm" class="md-nav__link">
    Helm
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#minikube" class="md-nav__link">
    Minikube
  </a>
  
    <nav class="md-nav" aria-label="Minikube">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#nginx-ingress-controller-setup" class="md-nav__link">
    NGINX Ingress Controller Setup
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#istio-setup" class="md-nav__link">
    Istio Setup
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#linkerd-setup" class="md-nav__link">
    Linkerd Setup
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#supplying-host-headers" class="md-nav__link">
    Supplying Host Headers
  </a>
  
    <nav class="md-nav" aria-label="Supplying Host Headers">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#determining-the-hostname-to-ip-mapping" class="md-nav__link">
    Determining the hostname to IP mapping
  </a>
  
    <nav class="md-nav" aria-label="Determining the hostname to IP mapping">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ingresses" class="md-nav__link">
    Ingresses
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#istio" class="md-nav__link">
    Istio
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configuring-local-hostname-resolution" class="md-nav__link">
    Configuring local hostname resolution
  </a>
  
    <nav class="md-nav" aria-label="Configuring local hostname resolution">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#dns-entry" class="md-nav__link">
    DNS Entry
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#etchosts-entry" class="md-nav__link">
    /etc/hosts Entry
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#supply-header-in-curl" class="md-nav__link">
    Supply Header in Curl
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#browser-extension" class="md-nav__link">
    Browser Extension
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../releasing/" class="md-nav__link">
        Releasing
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="https://github.com/argoproj/argo-rollouts/releases" class="md-nav__link">
        Releases ⧉
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="https://github.com/argoproj/argo-rollouts/milestones" class="md-nav__link">
        Roadmap ⧉
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="https://blog.argoproj.io/" class="md-nav__link">
        Blog ⧉
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#helm" class="md-nav__link">
    Helm
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#minikube" class="md-nav__link">
    Minikube
  </a>
  
    <nav class="md-nav" aria-label="Minikube">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#nginx-ingress-controller-setup" class="md-nav__link">
    NGINX Ingress Controller Setup
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#istio-setup" class="md-nav__link">
    Istio Setup
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#linkerd-setup" class="md-nav__link">
    Linkerd Setup
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#supplying-host-headers" class="md-nav__link">
    Supplying Host Headers
  </a>
  
    <nav class="md-nav" aria-label="Supplying Host Headers">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#determining-the-hostname-to-ip-mapping" class="md-nav__link">
    Determining the hostname to IP mapping
  </a>
  
    <nav class="md-nav" aria-label="Determining the hostname to IP mapping">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ingresses" class="md-nav__link">
    Ingresses
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#istio" class="md-nav__link">
    Istio
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configuring-local-hostname-resolution" class="md-nav__link">
    Configuring local hostname resolution
  </a>
  
    <nav class="md-nav" aria-label="Configuring local hostname resolution">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#dns-entry" class="md-nav__link">
    DNS Entry
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#etchosts-entry" class="md-nav__link">
    /etc/hosts Entry
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#supply-header-in-curl" class="md-nav__link">
    Supply Header in Curl
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#browser-extension" class="md-nav__link">
    Browser Extension
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                
<a href="https://github.com/argoproj/argo-rollouts/edit/master/docs/getting-started/setup/index.md" title="Edit this page" class="md-content__button md-icon">
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg>
</a>


<h1 id="environment-set-up">Environment Set Up<a class="headerlink" href="#environment-set-up" title="Permanent link">&para;</a></h1>
<p>This guide shows how to set up a local environment for development, testing, learning, or demoing
purposes.</p>
<h2 id="helm">Helm<a class="headerlink" href="#helm" title="Permanent link">&para;</a></h2>
<p>Some dependencies are installable via the Helm stable repository:</p>
<div class="highlight"><pre><span></span><code>helm repo add stable https://charts.helm.sh/stable
helm repo add grafana https://grafana.github.io/helm-charts
helm repo add prometheus-community https://prometheus-community.github.io/helm-charts
helm repo update
</code></pre></div>
<h2 id="minikube">Minikube<a class="headerlink" href="#minikube" title="Permanent link">&para;</a></h2>
<h3 id="nginx-ingress-controller-setup">NGINX Ingress Controller Setup<a class="headerlink" href="#nginx-ingress-controller-setup" title="Permanent link">&para;</a></h3>
<p>The following instructions describe how to configure NGINX Ingress Controller on minikube. For
basic ingress support, only the "ingress" addon needs to be enabled:</p>
<div class="highlight"><pre><span></span><code>minikube addons <span class="nb">enable</span> ingress
</code></pre></div>
<p>Optionally, Prometheus and Grafana can be installed to utilize progressive delivery functionality:</p>
<div class="highlight"><pre><span></span><code><span class="c1"># Install Prometheus</span>
kubectl create ns monitoring
helm install prometheus prometheus-community/prometheus -n monitoring -f docs/getting-started/setup/values-prometheus.yaml

<span class="c1"># Patch the ingress-nginx-controller pod so that it has the required</span>
<span class="c1"># prometheus annotations. This allows the pod to be scraped by the</span>
<span class="c1"># prometheus server.</span>
kubectl patch deploy ingress-nginx-controller -n ingress-nginx -p <span class="s2">&quot;</span><span class="k">$(</span>cat docs/getting-started/setup/ingress-nginx-controller-metrics-scrape.yaml<span class="k">)</span><span class="s2">&quot;</span>
</code></pre></div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><a href="https://kubernetes.io/docs/tasks/access-application-cluster/ingress-minikube/#enable-the-ingress-controller">For Minikube version 1.18.1 or earlier</a>, 
change the <code>-n</code> parameter value (namespace) to <code>kube-system</code>.</p>
</div>
<div class="highlight"><pre><span></span><code><span class="c1"># Install grafana along with nginx ingress dashboards</span>
helm install grafana grafana/grafana -n monitoring -f docs/getting-started/setup/values-grafana-nginx.yaml

<span class="c1"># Grafana UI can be accessed by running:</span>
minikube service grafana -n monitoring
</code></pre></div>
<h3 id="istio-setup">Istio Setup<a class="headerlink" href="#istio-setup" title="Permanent link">&para;</a></h3>
<p>The following instructions describe how to configure Istio on minikube.</p>
<div class="highlight"><pre><span></span><code><span class="c1"># Istio on Minikube requires additional memory and CPU</span>
minikube start --memory<span class="o">=</span>8192mb --cpus<span class="o">=</span><span class="m">4</span>

<span class="c1"># Install istio</span>
minikube addons <span class="nb">enable</span> istio-provisioner
minikube addons <span class="nb">enable</span> istio

<span class="c1"># Label the default namespace to enable istio sidecar injection for the namespace</span>
kubectl label namespace default istio-injection<span class="o">=</span>enabled
</code></pre></div>
<p>Istio already comes with a Prometheus database ready to use. To visualize metrics about istio
services, Grafana and Istio dashboards can be installed via Helm to leverage progressive delivery
functionality:</p>
<div class="highlight"><pre><span></span><code># Install Grafana and Istio dashboards
helm install grafana grafana/grafana -n istio-system -f docs/getting-started/setup/values-grafana-istio.yaml

# Grafana UI can be accessed by running
minikube service grafana -n istio-system
</code></pre></div>
<p>In order for traffic to enter the Istio mesh, the request needs to go through an Istio ingress
gateway, which is simply a normal Kubernetes Deployment and Service. One convenient way to reach
the gateway using minikube, is using the <code>minikube tunnel</code> command, which assigns Services a 
LoadBalancer. This command should be run in the background, usually in a separate terminal window:</p>
<div class="highlight"><pre><span></span><code>minikube tunnel
</code></pre></div>
<p>While running <code>minikube tunnel</code>, the <code>istio-ingressgateway</code> Service will now have an external IP
which can be retrieved via <code>kubectl</code>:</p>
<div class="highlight"><pre><span></span><code>$ kubectl get svc -n istio-system istio-ingressgateway
NAME                   TYPE           CLUSTER-IP      EXTERNAL-IP     PORT<span class="o">(</span>S<span class="o">)</span>                            AGE
istio-ingressgateway   LoadBalancer   <span class="m">10</span>.100.136.45   <span class="m">10</span>.100.136.45   <span class="m">15020</span>:31711/TCP,80:31298/TCP....   7d22h
</code></pre></div>
<p>The LoadBalancer external IP (10.100.136.45 in this example) is now reachable to access services in
the Istio mesh. Istio routes requests to the correct pod based on the Host HTTP header. Follow the
guide on <a href="#supplying-host-headers">supplying host headers</a> to learn how to configure your client
environment to supply the proper request to reach the pod.</p>
<h3 id="linkerd-setup">Linkerd Setup<a class="headerlink" href="#linkerd-setup" title="Permanent link">&para;</a></h3>
<p>Linkerd can be installed using the linkerd CLI.</p>
<div class="highlight"><pre><span></span><code>brew install linkerd
linkerd install | kubectl apply -f -
</code></pre></div>
<p>Linkerd does not provide its own ingress controller, choosing instead to work alongside your
ingress controller of choice. On minikube, we can use the built-in NGINX ingress addon and
reconfigure it to be part of the linkerd mesh.</p>
<div class="highlight"><pre><span></span><code># Install the NGINX ingress controller addon
minikube addons enable ingress

# Patch the nginx-ingress-controller deployment to allow injection of the linkerd proxy to the
# pod, so that it will be part of the mesh.
kubectl patch deploy ingress-nginx-controller -n kube-system \
  -p &#39;{&quot;spec&quot;:{&quot;template&quot;:{&quot;metadata&quot;:{&quot;annotations&quot;:{&quot;linkerd.io/inject&quot;:&quot;enabled&quot;}}}}}&#39;
</code></pre></div>
<h2 id="supplying-host-headers">Supplying Host Headers<a class="headerlink" href="#supplying-host-headers" title="Permanent link">&para;</a></h2>
<p>Most ingress controllers and service mesh implementations rely on the 
<a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Host">Host HTTP request header</a> being
supplied in the request in order to determine how to route the request to the correct pod.</p>
<h3 id="determining-the-hostname-to-ip-mapping">Determining the hostname to IP mapping<a class="headerlink" href="#determining-the-hostname-to-ip-mapping" title="Permanent link">&para;</a></h3>
<p>For the Host header to be set in the request, the hostname of the service should resolve to the
public IP address of the ingress or service mesh. Depending on if you are using an ingress
controller or a service mesh, use one of the following techniques to determine the correct hostname
to IP mapping:</p>
<h4 id="ingresses">Ingresses<a class="headerlink" href="#ingresses" title="Permanent link">&para;</a></h4>
<p>For traffic which is reaching the cluster network via a normal Kubernetes Ingress, the hostname
should map to the IP of the ingress. We can retrieve the external IP of the ingress from the
Ingress object itself, using <code>kubectl</code>:</p>
<div class="highlight"><pre><span></span><code>$ kubectl get ing rollouts-demo-stable
NAME                   CLASS    HOSTS                 ADDRESS        PORTS   AGE
rollouts-demo-stable   &lt;none&gt;   rollouts-demo.local   <span class="m">192</span>.168.64.2   <span class="m">80</span>      80m
</code></pre></div>
<p>In the example above, the hostname <code>rollouts-demo.local</code> should be configured to resolve to the
IP <code>192.168.64.2</code>. The next section describes various ways to configure your local system to
resolve the hostname to the desired IP.</p>
<h4 id="istio">Istio<a class="headerlink" href="#istio" title="Permanent link">&para;</a></h4>
<p>In the case of Istio, traffic enters the mesh through an
<a href="https://istio.io/latest/docs/tasks/traffic-management/ingress/ingress-control/">Ingress Gateway</a>,
which simply is a load balancer sitting at the edge of mesh.</p>
<p>To determine the correct hostname to IP mapping, it largely depends on what was configured in the 
<code>VirtualService</code> and <code>Gateway</code>. If you are following the
<a href="../istio/">Istio getting started guide</a>, the examples use the "default" istio 
ingress gateway, which we can obtain from kubectl:</p>
<div class="highlight"><pre><span></span><code>$ kubectl get svc -n istio-system istio-ingressgateway
NAME                   TYPE           CLUSTER-IP      EXTERNAL-IP     PORT<span class="o">(</span>S<span class="o">)</span>                            AGE
istio-ingressgateway   LoadBalancer   <span class="m">10</span>.100.136.45   <span class="m">10</span>.100.136.45   <span class="m">15020</span>:31711/TCP,80:31298/TCP....   7d22h
</code></pre></div>
<p>In the above example, the hostname <code>rollouts-demo.local</code> should be configured to resolve to the
IP <code>10.100.136.45</code>. The next section describes various ways to configure your local system to
resolve the hostname to the desired IP.</p>
<h3 id="configuring-local-hostname-resolution">Configuring local hostname resolution<a class="headerlink" href="#configuring-local-hostname-resolution" title="Permanent link">&para;</a></h3>
<p>Now that you have determined the correct hostname to IP mapping, the next step involves configuring
the system so that will resolve properly. There are different techniques to do this:</p>
<h4 id="dns-entry">DNS Entry<a class="headerlink" href="#dns-entry" title="Permanent link">&para;</a></h4>
<p>In real, production environments, the Host header is typically achieved by adding a DNS entry for
the hostname in the DNS server. However, for local development, this is typically not an easily
accessible option.</p>
<h4 id="etchosts-entry">/etc/hosts Entry<a class="headerlink" href="#etchosts-entry" title="Permanent link">&para;</a></h4>
<p>On local workstations, a local entry to <code>/etc/hosts</code> can be added to map the hostname and IP address
of the ingress. For example, the following is an example of an <code>/etc/hosts</code> file which maps
<code>rollouts-demo.local</code> to IP <code>10.100.136.45</code>.</p>
<div class="highlight"><pre><span></span><code><span class="c1">##</span>
<span class="c1"># Host Database</span>
<span class="c1">#</span>
<span class="c1"># localhost is used to configure the loopback interface</span>
<span class="c1"># when the system is booting.  Do not change this entry.</span>
<span class="c1">##</span>
<span class="m">127</span>.0.0.1       localhost
<span class="m">255</span>.255.255.255 broadcasthost
::1             localhost

<span class="m">10</span>.100.136.45  rollouts-demo.local
</code></pre></div>
<p>The advantages of using a host entry, are that it works for all clients (CLIs, browsers). On the
other hand, it is harder to maintain if the IP address changes frequently.</p>
<h4 id="supply-header-in-curl">Supply Header in Curl<a class="headerlink" href="#supply-header-in-curl" title="Permanent link">&para;</a></h4>
<p>Clients such as curl, have the ability to explicitly set a header (the <code>-H</code> flag in curl).
For example:</p>
<div class="highlight"><pre><span></span><code>$ curl -I -H <span class="s1">&#39;Host: rollouts-demo.local&#39;</span> http://10.100.136.45/color
HTTP/1.1 <span class="m">200</span> OK
content-type: text/plain<span class="p">;</span> <span class="nv">charset</span><span class="o">=</span>utf-8
x-content-type-options: nosniff
date: Wed, <span class="m">24</span> Jun <span class="m">2020</span> <span class="m">08</span>:44:59 GMT
content-length: <span class="m">6</span>
x-envoy-upstream-service-time: <span class="m">1</span>
server: istio-envoy
</code></pre></div>
<p>Notice that the same request made <em>without</em> the header, fails with a <code>404 Not Found</code> error.</p>
<div class="highlight"><pre><span></span><code>$ curl -I http://10.100.136.45/color
HTTP/1.1 <span class="m">404</span> Not Found
date: Wed, <span class="m">24</span> Jun <span class="m">2020</span> <span class="m">08</span>:46:07 GMT
server: istio-envoy
transfer-encoding: chunked
</code></pre></div>
<h4 id="browser-extension">Browser Extension<a class="headerlink" href="#browser-extension" title="Permanent link">&para;</a></h4>
<p>Similar to curl's ability to explicitly set a header, browsers can also achieve this via browser
extensions. One example of a browser extension which can do this, is
<a href="https://bewisse.com/modheader/">ModHeader</a>.</p>

              
            </article>
          </div>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    <nav class="md-footer__inner md-grid" aria-label="Footer">
      
        
        <a href="../../CONTRIBUTING/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Contribution Guide" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              Contribution Guide
            </div>
          </div>
        </a>
      
      
        
        <a href="../../releasing/" class="md-footer__link md-footer__link--next" aria-label="Next: Releasing" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              Releasing
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "../..", "features": [], "translations": {"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "search": "../../assets/javascripts/workers/search.22074ed6.min.js"}</script>
    
    
      <script src="../../assets/javascripts/bundle.1514a9a0.min.js"></script>
      
        <script src="../../assets/versions.js"></script>
      
    
  </body>
</html>