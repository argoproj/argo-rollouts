
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://argo-rollouts.readthedocs.io/proposals/resource-plugin/">
      
      
      
      
        
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.0">
    
    
      
        <title>Resource Plugin for Rollouts - Argo Rollouts - Kubernetes Progressive Delivery Controller</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.618322db.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.ab4e12ef.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Work+Sans:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Work Sans";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../assets/versions.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      
  


  
  

<script id="__analytics">function __md_analytics(){function e(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],e("js",new Date),e("config","G-5Z1VTPDL73"),document.addEventListener("DOMContentLoaded",(function(){document.forms.search&&document.forms.search.query.addEventListener("blur",(function(){this.value&&e("event","search",{search_term:this.value})}));document$.subscribe((function(){var t=document.forms.feedback;if(void 0!==t)for(var a of t.querySelectorAll("[type=submit]"))a.addEventListener("click",(function(a){a.preventDefault();var n=document.location.pathname,d=this.getAttribute("data-md-value");e("event","feedback",{page:n,data:d}),t.firstElementChild.disabled=!0;var r=t.querySelector(".md-feedback__note [data-md-value='"+d+"']");r&&(r.hidden=!1)})),t.hidden=!1})),location$.subscribe((function(t){e("config","G-5Z1VTPDL73",{page_path:t.pathname})}))}));var t=document.createElement("script");t.async=!0,t.src="https://www.googletagmanager.com/gtag/js?id=G-5Z1VTPDL73",document.getElementById("__analytics").insertAdjacentElement("afterEnd",t)}</script>
  
    <script>"undefined"!=typeof __md_analytics&&__md_analytics()</script>
  

    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="teal" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#resource-plugin-for-rollouts" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Argo Rollouts - Kubernetes Progressive Delivery Controller" class="md-header__button md-logo" aria-label="Argo Rollouts - Kubernetes Progressive Delivery Controller" data-md-component="logo">
      
  <img src="../../assets/logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Argo Rollouts - Kubernetes Progressive Delivery Controller
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Resource Plugin for Rollouts
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="teal" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6m0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4M7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/argoproj/argo-rollouts" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Argo Rollouts - Kubernetes Progressive Delivery Controller" class="md-nav__button md-logo" aria-label="Argo Rollouts - Kubernetes Progressive Delivery Controller" data-md-component="logo">
      
  <img src="../../assets/logo.png" alt="logo">

    </a>
    Argo Rollouts - Kubernetes Progressive Delivery Controller
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/argoproj/argo-rollouts" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Overview
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../installation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Installation
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../concepts/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Concepts
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../architecture/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Architecture
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Getting Started
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            
  
    Getting Started
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../getting-started/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Basic Usage
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../getting-started/ambassador/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Ambassador
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../getting-started/alb/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    AWS ALB
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../getting-started/appmesh/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    AWS App Mesh
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../getting-started/istio/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Istio
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../getting-started/nginx/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    NGINX
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../getting-started/smi/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    SMI
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../getting-started/mixed/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Multiple Providers
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../dashboard/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Dashboard
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7" >
        
          
          <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Rollout
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            
  
    Rollout
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7_1" >
        
          
          <label class="md-nav__link" for="__nav_7_1" id="__nav_7_1_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Deployment Strategies
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_7_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7_1">
            <span class="md-nav__icon md-icon"></span>
            
  
    Deployment Strategies
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../features/bluegreen/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    BlueGreen
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../features/canary/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Canary
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../features/specification/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Rollout Spec
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../features/canary/plugins/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Canary Step Plugin
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../features/hpa-support/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    HPA
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../features/vpa-support/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    VPA
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../features/ephemeral-metadata/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Ephemeral Metadata
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../features/restart/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Restarting Rollouts
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../features/scaledown-aborted-rs/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Scaledown Aborted Rollouts
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../features/rollback/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Rollback Window
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../features/anti-affinity/anti-affinity/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Anti Affinity
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../features/helm/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Helm
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../features/kustomize/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Kustomize
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../features/controller-metrics/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Controller Metrics
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8" >
        
          
          <label class="md-nav__link" for="__nav_8" id="__nav_8_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Traffic Management
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8">
            <span class="md-nav__icon md-icon"></span>
            
  
    Traffic Management
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../features/traffic-management/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Overview
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../features/traffic-management/ambassador/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Ambassador
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../features/traffic-management/apisix/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    APISIX
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../features/traffic-management/alb/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    AWS ALB
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../features/traffic-management/google-cloud/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Google Cloud
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../features/traffic-management/istio/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Istio
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../features/traffic-management/kong/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Kong
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../features/traffic-management/nginx/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    NGINX
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../features/traffic-management/plugins/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Plugins
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../features/traffic-management/smi/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    SMI
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../features/traffic-management/traefik/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Traefik
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9" >
        
          
          <label class="md-nav__link" for="__nav_9" id="__nav_9_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Analysis
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_9_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_9">
            <span class="md-nav__icon md-icon"></span>
            
  
    Analysis
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../features/analysis/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Overview
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../analysis/plugins/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Plugins
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../analysis/prometheus/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Prometheus
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../analysis/datadog/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Datadog
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../analysis/newrelic/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    NewRelic
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../analysis/wavefront/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Wavefront
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../analysis/job/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Job
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../analysis/web/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Web
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../analysis/kayenta/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Kayenta
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../analysis/cloudwatch/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    CloudWatch
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../analysis/graphite/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Graphite
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../analysis/influxdb/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    InfluxDB
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../analysis/skywalking/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Apache SkyWalking
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../features/experiment/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Experiments
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_11" >
        
          
          <label class="md-nav__link" for="__nav_11" id="__nav_11_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Notifications
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_11_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_11">
            <span class="md-nav__icon md-icon"></span>
            
  
    Notifications
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../features/notifications/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Overview
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_11_2" >
        
          
          <label class="md-nav__link" for="__nav_11_2" id="__nav_11_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Services
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_11_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_11_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    Services
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../generated/notification-services/alertmanager/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Alertmanager
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../generated/notification-services/awssqs/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    AWS SQS
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../generated/notification-services/email/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Email
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../generated/notification-services/github/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    GitHub
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../generated/notification-services/googlechat/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Google Chat
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../generated/notification-services/grafana/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Grafana
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../generated/notification-services/mattermost/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Mattermost
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../generated/notification-services/newrelic/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    NewRelic
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../generated/notification-services/opsgenie/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Opsgenie
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../generated/notification-services/overview/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Overview
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../generated/notification-services/pagerduty/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    PagerDuty
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../generated/notification-services/pagerduty_v2/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    PagerDuty V2
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../generated/notification-services/pushover/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Pushover
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../generated/notification-services/rocketchat/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Rocket.Chat
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../generated/notification-services/slack/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Slack
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../generated/notification-services/teams/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Teams
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../generated/notification-services/telegram/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Telegram
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../generated/notification-services/webex/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Webex Teams
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../generated/notification-services/webhook/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Webhook
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_12" >
        
          
          <label class="md-nav__link" for="__nav_12" id="__nav_12_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Kubectl Plugin
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_12_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_12">
            <span class="md-nav__icon md-icon"></span>
            
  
    Kubectl Plugin
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../features/kubectl-plugin/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Overview
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_12_2" >
        
          
          <label class="md-nav__link" for="__nav_12_2" id="__nav_12_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Commands
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_12_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_12_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    Commands
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../generated/kubectl-argo-rollouts/kubectl-argo-rollouts/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Rollouts
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../generated/kubectl-argo-rollouts/kubectl-argo-rollouts_abort/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Rollouts Abort
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../generated/kubectl-argo-rollouts/kubectl-argo-rollouts_completion/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Rollouts Completion
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../generated/kubectl-argo-rollouts/kubectl-argo-rollouts_create/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Rollouts Create
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../generated/kubectl-argo-rollouts/kubectl-argo-rollouts_create_analysisrun/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Rollouts Create Analysisrun
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../generated/kubectl-argo-rollouts/kubectl-argo-rollouts_dashboard/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Rollouts Dashboard
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../generated/kubectl-argo-rollouts/kubectl-argo-rollouts_get/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Rollouts Get
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../generated/kubectl-argo-rollouts/kubectl-argo-rollouts_get_experiment/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Rollouts Get Experiment
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../generated/kubectl-argo-rollouts/kubectl-argo-rollouts_get_rollout/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Rollouts Get Rollout
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../generated/kubectl-argo-rollouts/kubectl-argo-rollouts_lint/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Rollouts Lint
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../generated/kubectl-argo-rollouts/kubectl-argo-rollouts_list/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Rollouts List
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../generated/kubectl-argo-rollouts/kubectl-argo-rollouts_list_experiments/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Rollouts List Experiments
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../generated/kubectl-argo-rollouts/kubectl-argo-rollouts_list_rollouts/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Rollouts List Rollouts
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../generated/kubectl-argo-rollouts/kubectl-argo-rollouts_notifications/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Rollouts Notifications
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../generated/kubectl-argo-rollouts/kubectl-argo-rollouts_notifications_template/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Rollouts Notifications Template
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../generated/kubectl-argo-rollouts/kubectl-argo-rollouts_notifications_template_get/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Rollouts Notifications Template Get
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../generated/kubectl-argo-rollouts/kubectl-argo-rollouts_notifications_template_notify/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Rollouts Notifications Template Notify
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../generated/kubectl-argo-rollouts/kubectl-argo-rollouts_notifications_trigger/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Rollouts Notifications Trigger
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../generated/kubectl-argo-rollouts/kubectl-argo-rollouts_notifications_trigger_get/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Rollouts Notifications Trigger Get
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../generated/kubectl-argo-rollouts/kubectl-argo-rollouts_notifications_trigger_run/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Rollouts Notifications Trigger Run
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../generated/kubectl-argo-rollouts/kubectl-argo-rollouts_pause/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Rollouts Pause
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../generated/kubectl-argo-rollouts/kubectl-argo-rollouts_promote/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Rollouts Promote
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../generated/kubectl-argo-rollouts/kubectl-argo-rollouts_restart/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Rollouts Restart
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../generated/kubectl-argo-rollouts/kubectl-argo-rollouts_retry/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Rollouts Retry
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../generated/kubectl-argo-rollouts/kubectl-argo-rollouts_retry_experiment/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Rollouts Retry Experiment
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../generated/kubectl-argo-rollouts/kubectl-argo-rollouts_retry_rollout/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Rollouts Retry Rollout
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../generated/kubectl-argo-rollouts/kubectl-argo-rollouts_set/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Rollouts Set
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../generated/kubectl-argo-rollouts/kubectl-argo-rollouts_set_image/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Rollouts Set Image
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../generated/kubectl-argo-rollouts/kubectl-argo-rollouts_status/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Rollouts Status
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../generated/kubectl-argo-rollouts/kubectl-argo-rollouts_terminate/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Rollouts Terminate
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../generated/kubectl-argo-rollouts/kubectl-argo-rollouts_terminate_analysisrun/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Rollouts Terminate Analysisrun
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../generated/kubectl-argo-rollouts/kubectl-argo-rollouts_terminate_experiment/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Rollouts Terminate Experiment
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../generated/kubectl-argo-rollouts/kubectl-argo-rollouts_undo/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Rollouts Undo
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../generated/kubectl-argo-rollouts/kubectl-argo-rollouts_version/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Rollouts Version
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../best-practices/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Best Practices
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../migrating/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Migrating
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../FAQ/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    FAQ
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_16" >
        
          
          <label class="md-nav__link" for="__nav_16" id="__nav_16_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Security
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_16_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_16">
            <span class="md-nav__icon md-icon"></span>
            
  
    Security
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../security/security/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Security Policy
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../security/signed-release-assets/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Verify Release Artifacts
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_17" >
        
          
          <label class="md-nav__link" for="__nav_17" id="__nav_17_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Contributing
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_17_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_17">
            <span class="md-nav__icon md-icon"></span>
            
  
    Contributing
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../CONTRIBUTING/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Contribution Guide
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../getting-started/setup/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Environment Setup
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../releasing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Releasing
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../plugins/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Plugins
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="https://github.com/argoproj/argo-rollouts/releases" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Releases 
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="https://github.com/argoproj/argo-rollouts/milestones" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Roadmap 
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="https://blog.argoproj.io/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Blog 
  

    
  </span>
  
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#summary" class="md-nav__link">
    <span class="md-ellipsis">
      
        Summary
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#motivation" class="md-nav__link">
    <span class="md-ellipsis">
      
        Motivation
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Motivation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#goals" class="md-nav__link">
    <span class="md-ellipsis">
      
        Goals
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#non-goals" class="md-nav__link">
    <span class="md-ellipsis">
      
        Non-Goals
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#proposed-implementation-rolloutplugin-controller" class="md-nav__link">
    <span class="md-ellipsis">
      
        Proposed Implementation: RolloutPlugin Controller
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Proposed Implementation: RolloutPlugin Controller">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#traffic-routing-and-scaling-strategy" class="md-nav__link">
    <span class="md-ellipsis">
      
        Traffic Routing and Scaling Strategy
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#rolloutplugin-crd" class="md-nav__link">
    <span class="md-ellipsis">
      
        RolloutPlugin CRD
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="RolloutPlugin CRD">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#crd-design-options-for-resource-specification" class="md-nav__link">
    <span class="md-ellipsis">
      
        CRD Design Options for Resource Specification
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="CRD Design Options for Resource Specification">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#option-1-embed-resource-specs-in-the-crd" class="md-nav__link">
    <span class="md-ellipsis">
      
        Option 1: Embed Resource Specs in the CRD
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#option-2-reference-existing-kubernetes-objects-recommended" class="md-nav__link">
    <span class="md-ellipsis">
      
        Option 2: Reference Existing Kubernetes Objects (Recommended)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#option-3-create-dedicated-crds-per-resource-type" class="md-nav__link">
    <span class="md-ellipsis">
      
        Option 3: Create Dedicated CRDs per Resource Type
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#selected-approach-workloadref-option-2" class="md-nav__link">
    <span class="md-ellipsis">
      
        Selected Approach: workloadRef (Option 2)
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#rolloutplugin-crd-specification" class="md-nav__link">
    <span class="md-ellipsis">
      
        RolloutPlugin CRD Specification
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#rolloutplugin-status" class="md-nav__link">
    <span class="md-ellipsis">
      
        RolloutPlugin Status
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#rolloutplugin-controller-architecture" class="md-nav__link">
    <span class="md-ellipsis">
      
        RolloutPlugin Controller Architecture
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#generic-plugin-interface" class="md-nav__link">
    <span class="md-ellipsis">
      
        Generic Plugin Interface
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#controller-reconciliation-flow" class="md-nav__link">
    <span class="md-ellipsis">
      
        Controller Reconciliation Flow
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Controller Reconciliation Flow">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#statefulset-implementation-for-both-approaches" class="md-nav__link">
    <span class="md-ellipsis">
      
        StatefulSet Implementation for Both Approaches
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="StatefulSet Implementation for Both Approaches">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#canary-deployment-for-statefulsets" class="md-nav__link">
    <span class="md-ellipsis">
      
        Canary Deployment for StatefulSets
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bluegreen-deployment-for-statefulsets" class="md-nav__link">
    <span class="md-ellipsis">
      
        Blue/Green Deployment for StatefulSets
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#statefulset-use-cases" class="md-nav__link">
    <span class="md-ellipsis">
      
        StatefulSet Use Cases
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="StatefulSet Use Cases">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#use-case-1-canary-deployment-of-stateful-database" class="md-nav__link">
    <span class="md-ellipsis">
      
        Use Case 1: Canary Deployment of Stateful Database
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#use-case-2-bluegreen-deployment-of-stateful-message-queue" class="md-nav__link">
    <span class="md-ellipsis">
      
        Use Case 2: Blue/Green Deployment of Stateful Message Queue
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#replicaset-use-cases" class="md-nav__link">
    <span class="md-ellipsis">
      
        ReplicaSet Use Cases
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ReplicaSet Use Cases">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#use-case-1-simple-canary-deployment-with-replicasets" class="md-nav__link">
    <span class="md-ellipsis">
      
        Use Case 1: Simple Canary Deployment with ReplicaSets
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#use-case-2-simple-bluegreen-deployment-with-replicasets" class="md-nav__link">
    <span class="md-ellipsis">
      
        Use Case 2: Simple Blue/Green Deployment with ReplicaSets
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#advantages-of-the-rolloutplugin-controller-approach" class="md-nav__link">
    <span class="md-ellipsis">
      
        Advantages of the RolloutPlugin Controller Approach
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#security-considerations" class="md-nav__link">
    <span class="md-ellipsis">
      
        Security Considerations
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#risks-and-mitigations" class="md-nav__link">
    <span class="md-ellipsis">
      
        Risks and Mitigations
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#conclusion" class="md-nav__link">
    <span class="md-ellipsis">
      
        Conclusion
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#references" class="md-nav__link">
    <span class="md-ellipsis">
      
        References
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#archive-alternative-approach-considered" class="md-nav__link">
    <span class="md-ellipsis">
      
        Archive: Alternative Approach Considered
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Archive: Alternative Approach Considered">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#approach-1-resource-plugin-extension-not-selected" class="md-nav__link">
    <span class="md-ellipsis">
      
        Approach 1: Resource Plugin Extension (Not Selected)
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Approach 1: Resource Plugin Extension (Not Selected)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#generic-resource-plugin-interface" class="md-nav__link">
    <span class="md-ellipsis">
      
        Generic Resource Plugin Interface
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#extended-rollout-spec" class="md-nav__link">
    <span class="md-ellipsis">
      
        Extended Rollout Spec
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#rollout-status-extensions" class="md-nav__link">
    <span class="md-ellipsis">
      
        Rollout Status Extensions
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example-use-cases-for-approach-1" class="md-nav__link">
    <span class="md-ellipsis">
      
        Example Use Cases for Approach 1
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Example Use Cases for Approach 1">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#statefulset-canary-with-extended-rollout" class="md-nav__link">
    <span class="md-ellipsis">
      
        StatefulSet Canary with Extended Rollout
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#statefulset-bluegreen-with-extended-rollout" class="md-nav__link">
    <span class="md-ellipsis">
      
        StatefulSet Blue/Green with Extended Rollout
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#replicaset-canary-with-extended-rollout" class="md-nav__link">
    <span class="md-ellipsis">
      
        ReplicaSet Canary with Extended Rollout
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#replicaset-bluegreen-with-extended-rollout" class="md-nav__link">
    <span class="md-ellipsis">
      
        ReplicaSet Blue/Green with Extended Rollout
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="resource-plugin-for-rollouts">Resource Plugin for Rollouts<a class="headerlink" href="#resource-plugin-for-rollouts" title="Permanent link">&para;</a></h1>
<p>This document proposes a plugin-based architecture for extending Argo Rollouts to support advanced deployment strategies (canary and blue/green) for various Kubernetes resource types beyond Deployments, with an initial focus on StatefulSets.</p>
<h2 id="summary">Summary<a class="headerlink" href="#summary" title="Permanent link">&para;</a></h2>
<p>Currently, Argo Rollouts only supports Deployment workload types, which internally manage ReplicaSets. This proposal aims to extend Argo Rollouts to support other Kubernetes resources through a plugin architecture using a <strong>new dedicated RolloutPlugin Controller</strong> that manages a new CRD.</p>
<p>This approach creates a clean separation from the existing controller and allows for resource-specific optimizations while providing a framework that the community can extend for additional resource types.</p>
<h2 id="motivation">Motivation<a class="headerlink" href="#motivation" title="Permanent link">&para;</a></h2>
<p>The current Rollouts controller is tightly coupled to ReplicaSets, which limits support to Deployment workloads only. Many users need to perform canary or blue-green upgrades on other workload types such as StatefulSets, DaemonSets, and potentially custom resources. By implementing a plugin architecture, we can support these resource types without requiring major rewrites of the controller for each new resource.</p>
<p>StatefulSets present a compelling initial use case due to their prevalence in stateful application deployments. Their native update capabilities are limited to basic rolling updates with optional partition-based updates, without support for:</p>
<ol>
<li>Controlled traffic distribution during updates</li>
<li>Automatic analysis and verification of updates</li>
<li>Progressive traffic shifting</li>
<li>Automated canary analysis</li>
<li>Blue/green deployments with instant rollback capability</li>
</ol>
<h3 id="goals">Goals<a class="headerlink" href="#goals" title="Permanent link">&para;</a></h3>
<ul>
<li>Define plugin architectures that can work with any Kubernetes resource type</li>
<li>Create interfaces that abstract resource-specific details while maintaining core rollout functionality</li>
<li>Support canary and blue/green deployments for StatefulSets as initial implementations</li>
<li>Maintain compatibility with existing Argo Rollouts functionality</li>
<li>Provide a framework that the community can extend for additional resource types</li>
</ul>
<h3 id="non-goals">Non-Goals<a class="headerlink" href="#non-goals" title="Permanent link">&para;</a></h3>
<ul>
<li>Modify the core Kubernetes controllers for any resource type</li>
<li>Implement every possible resource type within this proposal</li>
<li>Support in-place updates for resources that don't natively support it</li>
<li>Create a monolithic solution that tries to handle all use cases internally</li>
</ul>
<h2 id="proposed-implementation-rolloutplugin-controller">Proposed Implementation: RolloutPlugin Controller<a class="headerlink" href="#proposed-implementation-rolloutplugin-controller" title="Permanent link">&para;</a></h2>
<p>This approach involves creating a dedicated controller that manages a new Custom Resource Definition (CRD) called <code>RolloutPlugin</code>. This controller is completely separate from the existing Argo Rollouts controller, providing clean separation and resource-specific optimizations. The implementation of the new controller would be done using the <a href="https://github.com/kubernetes-sigs/controller-runtime">controller-runtime</a> library instead of native informers as the library abstracts away a lot of boilerplate code that would be needed otherwise.</p>
<h3 id="traffic-routing-and-scaling-strategy">Traffic Routing and Scaling Strategy<a class="headerlink" href="#traffic-routing-and-scaling-strategy" title="Permanent link">&para;</a></h3>
<p>The RolloutPlugin CRD and controller focus on progressive delivery through native resource capabilities (e.g., StatefulSet partition field) rather than traffic management.</p>
<p><strong>Key Decisions:</strong></p>
<ol>
<li>
<p><strong>No <code>setCanaryScale</code> field</strong>: To avoid coupling pod count with traffic routing, the CRD will not implement the <code>setCanaryScale</code> field used in the existing Rollout CRD. This decouples the notion of replica/pod counts from traffic distribution.</p>
</li>
<li>
<p><strong>Weight-only approach</strong>: The CRD will only use <code>setWeight</code> steps to control the progression of rollouts. For StatefulSets, this translates to partition field manipulation (percentage of pods updated), not traffic percentages.</p>
</li>
<li>
<p><strong>Future plugin extensibility</strong>: While traffic routing is not in the initial scope, the CRD and plugin interface are designed to allow individual plugins to implement traffic routing capabilities in the future if needed for specific resource types. This keeps the core controller simple while maintaining flexibility for future enhancements.</p>
</li>
</ol>
<p><strong>Example</strong>: For a StatefulSet with 10 replicas, <code>setWeight: 40</code> means update 4 pods (40% of replicas) by setting <code>partition: 6</code>, not that 40% of traffic goes to those pods.</p>
<h3 id="rolloutplugin-crd">RolloutPlugin CRD<a class="headerlink" href="#rolloutplugin-crd" title="Permanent link">&para;</a></h3>
<p>The <code>RolloutPlugin</code> CRD defines a generic interface for managing the rollout of any Kubernetes resource type.</p>
<h4 id="crd-design-options-for-resource-specification">CRD Design Options for Resource Specification<a class="headerlink" href="#crd-design-options-for-resource-specification" title="Permanent link">&para;</a></h4>
<p>Since the RolloutPlugin CRD needs to be generic enough to support multiple Kubernetes resource types (StatefulSets, DaemonSets, etc.), there are three potential approaches for how users specify which resource to manage:</p>
<h5 id="option-1-embed-resource-specs-in-the-crd">Option 1: Embed Resource Specs in the CRD<a class="headerlink" href="#option-1-embed-resource-specs-in-the-crd" title="Permanent link">&para;</a></h5>
<p>This approach embeds the complete spec for each possible resource type directly in the RolloutPlugin CRD.</p>
<p><strong>Example:</strong>
<div class="highlight"><pre><span></span><code><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">argorollouts.io/v1alpha1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">RolloutPlugin</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my-rollout</span>
<span class="nt">spec</span><span class="p">:</span>
<span class="w">  </span><span class="nt">resourceType</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">StatefulSet</span>
<span class="w">  </span><span class="nt">statefulSetSpec</span><span class="p">:</span>
<span class="w">    </span><span class="c1"># Complete StatefulSet spec here</span>
<span class="w">  </span><span class="nt">daemonSetSpec</span><span class="p">:</span>
<span class="w">    </span><span class="c1"># Complete DaemonSet spec here (unused)</span>
<span class="w">  </span><span class="nt">strategy</span><span class="p">:</span>
<span class="w">    </span><span class="c1"># ...</span>
</code></pre></div></p>
<p><strong>Pros:</strong>
- Self-contained: All configuration in one place, no external dependencies
- Version control friendly: Complete desired configuration captured in one resource
- Initial deployment: Can create the workload and rollout management together</p>
<p><strong>Cons:</strong>
- CRD complexity: Very large CRD schema with multiple resource type specs
- Maintenance burden: Need to keep CRD in sync with upstream Kubernetes resource definitions
- Migration difficulty: Existing workloads would need to be recreated or have specs copied</p>
<h5 id="option-2-reference-existing-kubernetes-objects-recommended">Option 2: Reference Existing Kubernetes Objects (Recommended)<a class="headerlink" href="#option-2-reference-existing-kubernetes-objects-recommended" title="Permanent link">&para;</a></h5>
<p>This approach references an already-created Kubernetes resource by name and namespace using a <code>workloadRef</code>.</p>
<p><strong>Example:</strong>
<div class="highlight"><pre><span></span><code><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">argorollouts.io/v1alpha1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">RolloutPlugin</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my-rollout</span>
<span class="nt">spec</span><span class="p">:</span>
<span class="w">  </span><span class="nt">workloadRef</span><span class="p">:</span>
<span class="w">    </span><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">apps/v1</span>
<span class="w">    </span><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">StatefulSet</span>
<span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my-statefulset</span>
<span class="w">    </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">default</span>
<span class="w">  </span><span class="nt">strategy</span><span class="p">:</span>
<span class="w">    </span><span class="c1"># ...</span>
</code></pre></div></p>
<p><strong>Pros:</strong>
- Simple CRD: Minimal CRD schema, just needs reference fields
- Separation of concerns: Workload definition separate from rollout strategy
- Works with existing resources: Can add rollout capabilities to existing workloads without recreating them
- Standard Kubernetes patterns: Follows existing patterns like HPA referencing Deployments and Rollout referencing Deployments
- Easier maintenance: No need to keep CRD in sync with Kubernetes resource schemas
- Clear ownership: The original resource remains the source of truth for the workload spec</p>
<p><strong>Cons:</strong>
- Two-step process: Must create the workload first, then the RolloutPlugin
- Coordination complexity: Updates to workload spec need coordination with rollout strategy</p>
<h5 id="option-3-create-dedicated-crds-per-resource-type">Option 3: Create Dedicated CRDs per Resource Type<a class="headerlink" href="#option-3-create-dedicated-crds-per-resource-type" title="Permanent link">&para;</a></h5>
<p>This approach creates separate CRDs for each resource type: <code>StatefulSetRollout</code>, <code>DaemonSetRollout</code>, etc.</p>
<p><strong>Example:</strong>
<div class="highlight"><pre><span></span><code><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">argorollouts.io/v1alpha1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">StatefulSetRollout</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my-sts-rollout</span>
<span class="nt">spec</span><span class="p">:</span>
<span class="w">  </span><span class="nt">statefulSetSpec</span><span class="p">:</span>
<span class="w">    </span><span class="c1"># StatefulSet specific fields</span>
<span class="w">  </span><span class="nt">strategy</span><span class="p">:</span>
<span class="w">    </span><span class="c1"># Rollout strategy</span>
</code></pre></div></p>
<p><strong>Pros:</strong>
- Type safety: Each CRD is strongly typed for its specific resource
- Independent evolution: Each CRD can evolve independently
- Resource-specific features: Easy to add resource-specific rollout features</p>
<p><strong>Cons:</strong>
- Maintenance burden: Multiple CRDs to install and maintain (one per resource type)
- Code duplication: Similar controller logic needs to be replicated or abstracted
- Documentation overhead: Need separate documentation for each CRD</p>
<h5 id="selected-approach-workloadref-option-2">Selected Approach: workloadRef (Option 2)<a class="headerlink" href="#selected-approach-workloadref-option-2" title="Permanent link">&para;</a></h5>
<p>This proposal adopts <strong>Option 2 (workloadRef)</strong> as the primary approach because:</p>
<ol>
<li><strong>Alignment with existing patterns</strong>: Mirrors how current Argo Rollouts uses <code>workloadRef</code> for Deployments</li>
<li><strong>Plugin architecture compatibility</strong>: Controller remains resource-agnostic, delegating to plugins</li>
<li><strong>Minimal CRD complexity</strong>: Keeps the CRD generic and maintainable</li>
<li><strong>Practical for canary deployments</strong>: Plugins can manipulate referenced resources (e.g., partition field for StatefulSets)</li>
<li><strong>Practical for blue/green deployments</strong>: Plugins can create/manage additional resources (e.g., green StatefulSet) while referencing the original as blue</li>
</ol>
<h4 id="rolloutplugin-crd-specification">RolloutPlugin CRD Specification<a class="headerlink" href="#rolloutplugin-crd-specification" title="Permanent link">&para;</a></h4>
<p>With the <code>workloadRef</code> approach, the <code>RolloutPlugin</code> CRD is defined as follows:</p>
<div class="highlight"><pre><span></span><code><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">argorollouts.io/v1alpha1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">RolloutPlugin</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my-statefulset-rollout</span>
<span class="nt">spec</span><span class="p">:</span>
<span class="w">  </span><span class="c1"># Reference to the workload being managed</span>
<span class="w">  </span><span class="nt">workloadRef</span><span class="p">:</span>
<span class="w">    </span><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">apps/v1</span>
<span class="w">    </span><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">StatefulSet</span>
<span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my-statefulset</span>
<span class="w">    </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">default</span>

<span class="w">  </span><span class="c1"># Plugin-specific configuration</span>
<span class="w">  </span><span class="nt">plugin</span><span class="p">:</span>
<span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">statefulset</span>
<span class="w">    </span><span class="nt">verify</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">    </span><span class="nt">sha256</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;abc123...&quot;</span>
<span class="w">    </span><span class="nt">url</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;https://example.com/plugins/statefulset&quot;</span>
<span class="w">    </span><span class="c1"># Plugin-specific configuration</span>
<span class="w">    </span><span class="nt">config</span><span class="p">:</span>
<span class="w">      </span><span class="nt">customField1</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;value1&quot;</span>
<span class="w">      </span><span class="nt">customField2</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;value2&quot;</span>

<span class="w">  </span><span class="c1"># Rollout strategy definition</span>
<span class="w">  </span><span class="nt">strategy</span><span class="p">:</span>
<span class="w">    </span><span class="c1"># Strategy configuration depends on the type</span>
<span class="w">    </span><span class="nt">canary</span><span class="p">:</span>
<span class="w">      </span><span class="nt">steps</span><span class="p">:</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">setWeight</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">20</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">pause</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{</span><span class="nt">duration</span><span class="p">:</span><span class="w"> </span><span class="nv">1h</span><span class="p p-Indicator">}</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">setWeight</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">40</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">pause</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{</span><span class="nt">duration</span><span class="p">:</span><span class="w"> </span><span class="nv">1h</span><span class="p p-Indicator">}</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">setWeight</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">60</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">pause</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{</span><span class="nt">duration</span><span class="p">:</span><span class="w"> </span><span class="nv">1h</span><span class="p p-Indicator">}</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">setWeight</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">80</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">pause</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{</span><span class="nt">duration</span><span class="p">:</span><span class="w"> </span><span class="nv">1h</span><span class="p p-Indicator">}</span>
<span class="w">    </span><span class="c1"># BlueGreen configuration would be here</span>
<span class="w">    </span><span class="c1"># blueGreen:</span>
<span class="w">    </span><span class="c1">#   ...</span>
</code></pre></div>
<h3 id="rolloutplugin-status">RolloutPlugin Status<a class="headerlink" href="#rolloutplugin-status" title="Permanent link">&para;</a></h3>
<p>The <code>RolloutPlugin</code> status would track the progress of the rollout:</p>
<div class="highlight"><pre><span></span><code><span class="nt">status</span><span class="p">:</span>
<span class="w">  </span><span class="nt">observedGeneration</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
<span class="w">  </span><span class="nt">initialized</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">  </span><span class="nt">currentRevision</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;hash123456&quot;</span>
<span class="w">  </span><span class="nt">updatedRevision</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;hash789012&quot;</span>
<span class="w">  </span><span class="nt">currentStepIndex</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2</span>
<span class="w">  </span><span class="nt">currentStepComplete</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="w">  </span><span class="nt">rolloutInProgress</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">  </span><span class="nt">conditions</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Progressing</span>
<span class="w">      </span><span class="nt">status</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;True&quot;</span>
<span class="w">      </span><span class="nt">message</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">StatefulSet successfully updated to partition 8 (20% weight)</span>
<span class="w">  </span><span class="nt">paused</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="w">  </span><span class="nt">aborted</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="w">  </span><span class="c1"># Plugin-specific status fields</span>
<span class="w">  </span><span class="nt">pluginStatus</span><span class="p">:</span>
<span class="w">    </span><span class="nt">resourceType</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;StatefulSet&quot;</span>
<span class="w">    </span><span class="nt">customStatusField1</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;value1&quot;</span>
<span class="w">    </span><span class="nt">customStatusField2</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;value2&quot;</span>
</code></pre></div>
<h3 id="rolloutplugin-controller-architecture">RolloutPlugin Controller Architecture<a class="headerlink" href="#rolloutplugin-controller-architecture" title="Permanent link">&para;</a></h3>
<p>The controller would load plugins for different resource types, where each plugin implements the specific logic needed for that resource type. The controller itself would be resource-agnostic, delegating resource-specific operations to plugins. The <code>RolloutPlugin</code> controller would use HashiCorp's go-plugin library for plugin management, similar to the existing plugins in Argo Rollouts.</p>
<h3 id="generic-plugin-interface">Generic Plugin Interface<a class="headerlink" href="#generic-plugin-interface" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="c1">// ResourcePhase defines the possible phases of a resource operation</span>
<span class="kd">type</span><span class="w"> </span><span class="nx">ResourcePhase</span><span class="w"> </span><span class="kt">string</span>

<span class="kd">const</span><span class="w"> </span><span class="p">(</span>
<span class="w">  </span><span class="nx">ResourcePhaseRunning</span><span class="w">     </span><span class="nx">ResourcePhase</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">&quot;Running&quot;</span>
<span class="w">  </span><span class="nx">ResourcePhaseSuccessful</span><span class="w">  </span><span class="nx">ResourcePhase</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">&quot;Successful&quot;</span>
<span class="w">  </span><span class="nx">ResourcePhaseFailed</span><span class="w">      </span><span class="nx">ResourcePhase</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">&quot;Failed&quot;</span>
<span class="w">  </span><span class="nx">ResourcePhaseError</span><span class="w">       </span><span class="nx">ResourcePhase</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">&quot;Error&quot;</span>
<span class="p">)</span>

<span class="c1">// RolloutPluginContext contains information needed by plugin operations</span>
<span class="kd">type</span><span class="w"> </span><span class="nx">RolloutPluginContext</span><span class="w"> </span><span class="kd">struct</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="c1">// The RolloutPlugin resource</span>
<span class="w">  </span><span class="nx">RolloutPlugin</span><span class="w"> </span><span class="o">*</span><span class="nx">v1alpha1</span><span class="p">.</span><span class="nx">RolloutPlugin</span>

<span class="w">  </span><span class="c1">// Configuration for the plugin operation</span>
<span class="w">  </span><span class="nx">Config</span><span class="w"> </span><span class="kd">map</span><span class="p">[</span><span class="kt">string</span><span class="p">]</span><span class="kd">interface</span><span class="p">{}</span>

<span class="w">  </span><span class="c1">// Status carries persisted state between operations</span>
<span class="w">  </span><span class="nx">Status</span><span class="w"> </span><span class="kd">map</span><span class="p">[</span><span class="kt">string</span><span class="p">]</span><span class="kd">interface</span><span class="p">{}</span>
<span class="p">}</span>

<span class="c1">// OperationResult contains the result of an operation</span>
<span class="kd">type</span><span class="w"> </span><span class="nx">OperationResult</span><span class="w"> </span><span class="kd">struct</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="c1">// Success indicates if the operation was successful</span>
<span class="w">  </span><span class="nx">Success</span><span class="w"> </span><span class="kt">bool</span>

<span class="w">  </span><span class="c1">// Message provides additional context about the operation</span>
<span class="w">  </span><span class="nx">Message</span><span class="w"> </span><span class="kt">string</span>

<span class="w">  </span><span class="c1">// Status contains operation-specific status information</span>
<span class="w">  </span><span class="nx">Status</span><span class="w"> </span><span class="kd">map</span><span class="p">[</span><span class="kt">string</span><span class="p">]</span><span class="kd">interface</span><span class="p">{}</span>

<span class="w">  </span><span class="c1">// Error details if the operation failed</span>
<span class="w">  </span><span class="nx">Error</span><span class="w"> </span><span class="o">*</span><span class="nx">RpcError</span>

<span class="w">  </span><span class="c1">// Whether to requeue the reconciliation and after how long</span>
<span class="w">  </span><span class="nx">Requeue</span><span class="w"> </span><span class="kt">bool</span>
<span class="w">  </span><span class="nx">RequeueAfter</span><span class="w"> </span><span class="nx">time</span><span class="p">.</span><span class="nx">Duration</span>
<span class="p">}</span>

<span class="c1">// RpcError is a structured error for plugin responses</span>
<span class="kd">type</span><span class="w"> </span><span class="nx">RpcError</span><span class="w"> </span><span class="kd">struct</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nx">ErrorString</span><span class="w"> </span><span class="kt">string</span>
<span class="w">  </span><span class="nx">Code</span><span class="w"> </span><span class="kt">int</span>
<span class="w">  </span><span class="nx">Details</span><span class="w"> </span><span class="kt">string</span>
<span class="p">}</span>

<span class="c1">// RolloutPlugin defines the generic interface for resource plugins</span>
<span class="kd">type</span><span class="w"> </span><span class="nx">RolloutPlugin</span><span class="w"> </span><span class="kd">interface</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="c1">// Initialize the plugin with any required setup</span>
<span class="w">  </span><span class="nx">Init</span><span class="p">()</span><span class="w"> </span><span class="kt">error</span>

<span class="w">  </span><span class="c1">// CreateResource creates a resource with the specified role</span>
<span class="w">  </span><span class="c1">// role can be &quot;stable&quot;, &quot;canary&quot;, &quot;preview&quot;, &quot;active&quot;, etc.</span>
<span class="w">  </span><span class="nx">CreateResource</span><span class="p">(</span><span class="nx">ctx</span><span class="w"> </span><span class="nx">RolloutPluginContext</span><span class="p">,</span><span class="w"> </span><span class="nx">role</span><span class="w"> </span><span class="kt">string</span><span class="p">)</span><span class="w"> </span><span class="nx">OperationResult</span>

<span class="w">  </span><span class="c1">// UpdateResource updates a resource with the specified role</span>
<span class="w">  </span><span class="c1">// role can be &quot;stable&quot;, &quot;canary&quot;, &quot;preview&quot;, &quot;active&quot;, etc.</span>
<span class="w">  </span><span class="nx">UpdateResource</span><span class="p">(</span><span class="nx">ctx</span><span class="w"> </span><span class="nx">RolloutPluginContext</span><span class="p">,</span><span class="w"> </span><span class="nx">role</span><span class="w"> </span><span class="kt">string</span><span class="p">)</span><span class="w"> </span><span class="nx">OperationResult</span>

<span class="w">  </span><span class="c1">// ScaleResource scales a resource with the specified role to the desired replica count</span>
<span class="w">  </span><span class="nx">ScaleResource</span><span class="p">(</span><span class="nx">ctx</span><span class="w"> </span><span class="nx">RolloutPluginContext</span><span class="p">,</span><span class="w"> </span><span class="nx">role</span><span class="w"> </span><span class="kt">string</span><span class="p">,</span><span class="w"> </span><span class="nx">replicas</span><span class="w"> </span><span class="kt">int32</span><span class="p">)</span><span class="w"> </span><span class="nx">OperationResult</span>

<span class="w">  </span><span class="c1">// SetWeight updates traffic distribution between resources</span>
<span class="w">  </span><span class="c1">// For canary: percentage of traffic to canary</span>
<span class="w">  </span><span class="c1">// For blue-green: percentage of traffic to preview</span>
<span class="w">  </span><span class="nx">SetWeight</span><span class="p">(</span><span class="nx">ctx</span><span class="w"> </span><span class="nx">RolloutPluginContext</span><span class="p">,</span><span class="w"> </span><span class="nx">desiredWeight</span><span class="w"> </span><span class="kt">int32</span><span class="p">)</span><span class="w"> </span><span class="nx">OperationResult</span>

<span class="w">  </span><span class="c1">// PromoteResource promotes a resource to become the new stable version</span>
<span class="w">  </span><span class="c1">// For canary: promotes canary to stable</span>
<span class="w">  </span><span class="c1">// For blue-green: promotes preview to active</span>
<span class="w">  </span><span class="nx">PromoteResource</span><span class="p">(</span><span class="nx">ctx</span><span class="w"> </span><span class="nx">RolloutPluginContext</span><span class="p">)</span><span class="w"> </span><span class="nx">OperationResult</span>

<span class="w">  </span><span class="c1">// Terminate stops an uncompleted operation</span>
<span class="w">  </span><span class="nx">Terminate</span><span class="p">(</span><span class="nx">ctx</span><span class="w"> </span><span class="nx">RolloutPluginContext</span><span class="p">)</span><span class="w"> </span><span class="nx">OperationResult</span>

<span class="w">  </span><span class="c1">// VerifyWeight checks if the desired weight distribution has been achieved</span>
<span class="w">  </span><span class="nx">VerifyWeight</span><span class="p">(</span><span class="nx">ctx</span><span class="w"> </span><span class="nx">RolloutPluginContext</span><span class="p">,</span><span class="w"> </span><span class="nx">desiredWeight</span><span class="w"> </span><span class="kt">int32</span><span class="p">)</span><span class="w"> </span><span class="nx">OperationResult</span>

<span class="w">  </span><span class="c1">// IsResourceReady checks if a specific resource is considered ready</span>
<span class="w">  </span><span class="nx">IsResourceReady</span><span class="p">(</span><span class="nx">ctx</span><span class="w"> </span><span class="nx">RolloutPluginContext</span><span class="p">,</span><span class="w"> </span><span class="nx">role</span><span class="w"> </span><span class="kt">string</span><span class="p">)</span><span class="w"> </span><span class="nx">OperationResult</span>

<span class="w">  </span><span class="c1">// GetPluginInfo returns metadata about the plugin</span>
<span class="w">  </span><span class="nx">GetPluginInfo</span><span class="p">()</span><span class="w"> </span><span class="nx">PluginInfo</span>
<span class="p">}</span>

<span class="c1">// PluginInfo contains metadata about a plugin</span>
<span class="kd">type</span><span class="w"> </span><span class="nx">PluginInfo</span><span class="w"> </span><span class="kd">struct</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nx">Name</span><span class="w"> </span><span class="kt">string</span>
<span class="w">  </span><span class="nx">Version</span><span class="w"> </span><span class="kt">string</span>
<span class="w">  </span><span class="nx">SupportedResourceKinds</span><span class="w"> </span><span class="p">[]</span><span class="kt">string</span>
<span class="w">  </span><span class="nx">SupportedStrategies</span><span class="w"> </span><span class="p">[]</span><span class="kt">string</span>
<span class="p">}</span>
</code></pre></div>
<h3 id="controller-reconciliation-flow">Controller Reconciliation Flow<a class="headerlink" href="#controller-reconciliation-flow" title="Permanent link">&para;</a></h3>
<p>The <code>RolloutPlugin</code> controller would follow this reconciliation flow:</p>
<ol>
<li>Fetch the <code>RolloutPlugin</code> resource</li>
<li>Initialize the appropriate plugin based on the resource type</li>
<li>Sync the plugin with the current state</li>
<li>Process steps based on the current index:</li>
<li>For <code>setWeight</code> steps, call the plugin's SetWeight method</li>
<li>For <code>pause</code> steps, handle the pause logic in the controller</li>
<li>For <code>analysis</code> steps, create and monitor analysis runs</li>
<li>Update the <code>RolloutPlugin</code> status with the current progress</li>
<li>Requeue for the next reconciliation</li>
</ol>
<h4 id="_1"><a class="headerlink" href="#_1" title="Permanent link">&para;</a></h4>
<h2 id="statefulset-implementation-for-both-approaches">StatefulSet Implementation for Both Approaches<a class="headerlink" href="#statefulset-implementation-for-both-approaches" title="Permanent link">&para;</a></h2>
<p>Regardless of which approach is selected, the StatefulSet-specific implementation will leverage the partition field to achieve canary deployments:</p>
<h3 id="canary-deployment-for-statefulsets">Canary Deployment for StatefulSets<a class="headerlink" href="#canary-deployment-for-statefulsets" title="Permanent link">&para;</a></h3>
<p>The canary deployment will leverage the StatefulSet's partition feature:</p>
<ol>
<li>Start with partition = replicas (no pods updated)</li>
<li>Gradually decrease partition as the rollout progresses:</li>
<li>partition = replicas * (1 - weight/100)</li>
<li>Examples for 10 replicas:<ul>
<li>20% weight  partition = 8 (2 pods updated)</li>
<li>50% weight  partition = 5 (5 pods updated)</li>
<li>100% weight  partition = 0 (all pods updated)</li>
</ul>
</li>
<li>Monitor pod health and analyze metrics at each step</li>
<li>On failure, set partition back to replicas (revert all pods)</li>
<li>On success, set partition to 0 (update all pods)</li>
</ol>
<p>Given StatefulSets update in descending order (N-1, N-2, ...), the partition field indicates the first pod that will NOT be updated. This means pods with ordinal &gt;= partition remain at the old version.</p>
<h3 id="bluegreen-deployment-for-statefulsets">Blue/Green Deployment for StatefulSets<a class="headerlink" href="#bluegreen-deployment-for-statefulsets" title="Permanent link">&para;</a></h3>
<p>Blue/green deployment for StatefulSets is more complex due to their stateful nature. We propose the following approach:</p>
<ol>
<li>Create a new StatefulSet with a different name (with suffix -green)</li>
<li>Populate state in the new StatefulSet if needed (may require application-specific logic)</li>
<li>Direct new traffic to the green StatefulSet through service selector changes</li>
<li>Analyze metrics to verify the green deployment</li>
<li>On success, switch all traffic to the green deployment and decommission the blue</li>
<li>On failure, keep traffic on the blue deployment and clean up the green</li>
</ol>
<p>This approach may require application-specific state transfer, which can be handled through pre/post hooks or custom step plugins.</p>
<h2 id="statefulset-use-cases">StatefulSet Use Cases<a class="headerlink" href="#statefulset-use-cases" title="Permanent link">&para;</a></h2>
<h3 id="use-case-1-canary-deployment-of-stateful-database">Use Case 1: Canary Deployment of Stateful Database<a class="headerlink" href="#use-case-1-canary-deployment-of-stateful-database" title="Permanent link">&para;</a></h3>
<p><strong>Current Challenge</strong>: A team runs a stateful MongoDB database as a StatefulSet in Kubernetes. When upgrading to a new MongoDB version, they currently have two unsatisfactory options:</p>
<ol>
<li>Update all instances at once (risky)</li>
<li>Manually update the partition field over time (labor-intensive and error-prone)</li>
</ol>
<p><strong>Proposed Solution</strong>: Using either approach with StatefulSet support, the team can:</p>
<div class="highlight"><pre><span></span><code><span class="c1"># Approach 1: Using extended Rollout</span>
<span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">argoproj.io/v1alpha1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Rollout</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">mongodb-rollout</span>
<span class="nt">spec</span><span class="p">:</span>
<span class="w">  </span><span class="nt">replicas</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">5</span>
<span class="w">  </span><span class="nt">workloadRef</span><span class="p">:</span>
<span class="w">    </span><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">apps/v1</span>
<span class="w">    </span><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">StatefulSet</span>
<span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">mongodb</span>

<span class="w">  </span><span class="nt">resourcePlugin</span><span class="p">:</span>
<span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">statefulset</span>

<span class="w">  </span><span class="nt">strategy</span><span class="p">:</span>
<span class="w">    </span><span class="nt">canary</span><span class="p">:</span>
<span class="w">      </span><span class="nt">steps</span><span class="p">:</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">setWeight</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">20</span><span class="w">  </span><span class="c1"># Update 1 replica (partition=4)</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">pause</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{</span><span class="nt">duration</span><span class="p">:</span><span class="w"> </span><span class="nv">2h</span><span class="p p-Indicator">}</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">analysis</span><span class="p">:</span>
<span class="w">            </span><span class="nt">templates</span><span class="p">:</span>
<span class="w">              </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">templateName</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">mongodb-metrics</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">setWeight</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">40</span><span class="w">  </span><span class="c1"># Update 2 replicas (partition=3)</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">pause</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{</span><span class="nt">duration</span><span class="p">:</span><span class="w"> </span><span class="nv">2h</span><span class="p p-Indicator">}</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">setWeight</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">100</span><span class="w"> </span><span class="c1"># Update all replicas (partition=0)</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="c1"># Approach 2: Using RolloutPlugin CRD</span>
<span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">argorollouts.io/v1alpha1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">RolloutPlugin</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">mongodb-rollout</span>
<span class="nt">spec</span><span class="p">:</span>
<span class="w">  </span><span class="nt">workloadRef</span><span class="p">:</span>
<span class="w">    </span><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">apps/v1</span>
<span class="w">    </span><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">StatefulSet</span>
<span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">mongodb</span>

<span class="w">  </span><span class="nt">plugin</span><span class="p">:</span>
<span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">statefulset</span>
<span class="w">    </span><span class="nt">verify</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">    </span><span class="nt">sha256</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;abc123...&quot;</span>
<span class="w">    </span><span class="nt">url</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;https://example.com/plugins/statefulset&quot;</span>

<span class="w">  </span><span class="nt">strategy</span><span class="p">:</span>
<span class="w">    </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Canary</span>
<span class="w">    </span><span class="nt">canary</span><span class="p">:</span>
<span class="w">      </span><span class="nt">steps</span><span class="p">:</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">setWeight</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">20</span><span class="w">  </span><span class="c1"># Update 1 replica (partition=4)</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">pause</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{</span><span class="nt">duration</span><span class="p">:</span><span class="w"> </span><span class="nv">2h</span><span class="p p-Indicator">}</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">analysis</span><span class="p">:</span>
<span class="w">            </span><span class="nt">templates</span><span class="p">:</span>
<span class="w">              </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">templateName</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">mongodb-metrics</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">setWeight</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">40</span><span class="w">  </span><span class="c1"># Update 2 replicas (partition=3)</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">pause</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{</span><span class="nt">duration</span><span class="p">:</span><span class="w"> </span><span class="nv">2h</span><span class="p p-Indicator">}</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">setWeight</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">100</span><span class="w"> </span><span class="c1"># Update all replicas (partition=0)</span>
</code></pre></div>
<h3 id="use-case-2-bluegreen-deployment-of-stateful-message-queue">Use Case 2: Blue/Green Deployment of Stateful Message Queue<a class="headerlink" href="#use-case-2-bluegreen-deployment-of-stateful-message-queue" title="Permanent link">&para;</a></h3>
<p><strong>Current Challenge</strong>: A team runs a Kafka cluster as a StatefulSet. They need to test a new version with production traffic but be able to instantly roll back if issues are detected.</p>
<p><strong>Proposed Solution</strong>: Using either approach with StatefulSet blue/green support:</p>
<div class="highlight"><pre><span></span><code><span class="c1"># Approach 1: Using extended Rollout</span>
<span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">argoproj.io/v1alpha1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Rollout</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">kafka-rollout</span>
<span class="nt">spec</span><span class="p">:</span>
<span class="w">  </span><span class="nt">replicas</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">3</span>
<span class="w">  </span><span class="nt">workloadRef</span><span class="p">:</span>
<span class="w">    </span><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">apps/v1</span>
<span class="w">    </span><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">StatefulSet</span>
<span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">kafka</span>

<span class="w">  </span><span class="nt">resourcePlugin</span><span class="p">:</span>
<span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">statefulset</span>

<span class="w">  </span><span class="nt">strategy</span><span class="p">:</span>
<span class="w">    </span><span class="nt">blueGreen</span><span class="p">:</span>
<span class="w">      </span><span class="nt">activeService</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">kafka-active</span>
<span class="w">      </span><span class="nt">previewService</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">kafka-preview</span>
<span class="w">      </span><span class="nt">autoPromotionEnabled</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="w">      </span><span class="nt">previewReplicaCount</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">3</span>
<span class="w">      </span><span class="nt">scaleDownDelaySeconds</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">600</span>
<span class="w">      </span><span class="nt">analysis</span><span class="p">:</span>
<span class="w">        </span><span class="nt">templates</span><span class="p">:</span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">templateName</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">kafka-metrics</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="c1"># Approach 2: Using RolloutPlugin CRD</span>
<span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">argorollouts.io/v1alpha1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">RolloutPlugin</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">kafka-rollout</span>
<span class="nt">spec</span><span class="p">:</span>
<span class="w">  </span><span class="nt">workloadRef</span><span class="p">:</span>
<span class="w">    </span><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">apps/v1</span>
<span class="w">    </span><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">StatefulSet</span>
<span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">kafka</span>

<span class="w">  </span><span class="nt">plugin</span><span class="p">:</span>
<span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">statefulset</span>
<span class="w">    </span><span class="nt">verify</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">    </span><span class="nt">sha256</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;abc123...&quot;</span>
<span class="w">    </span><span class="nt">url</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;https://example.com/plugins/statefulset&quot;</span>

<span class="w">  </span><span class="nt">strategy</span><span class="p">:</span>
<span class="w">    </span><span class="nt">blueGreen</span><span class="p">:</span>
<span class="w">      </span><span class="nt">activeService</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">kafka-active</span>
<span class="w">      </span><span class="nt">previewService</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">kafka-preview</span>
<span class="w">      </span><span class="nt">autoPromotionEnabled</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="w">      </span><span class="nt">previewReplicaCount</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">3</span>
<span class="w">      </span><span class="nt">scaleDownDelaySeconds</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">600</span>
<span class="w">      </span><span class="nt">analysis</span><span class="p">:</span>
<span class="w">        </span><span class="nt">templates</span><span class="p">:</span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">templateName</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">kafka-metrics</span>
</code></pre></div>
<h2 id="replicaset-use-cases">ReplicaSet Use Cases<a class="headerlink" href="#replicaset-use-cases" title="Permanent link">&para;</a></h2>
<p>To demonstrate the flexibility of the RolloutPlugin approach, here are simpler use cases for ReplicaSets.</p>
<h3 id="use-case-1-simple-canary-deployment-with-replicasets">Use Case 1: Simple Canary Deployment with ReplicaSets<a class="headerlink" href="#use-case-1-simple-canary-deployment-with-replicasets" title="Permanent link">&para;</a></h3>
<p><strong>Current Challenge</strong>: A team wants a lightweight way to progressively roll out changes to their service without using full Deployments, with controlled increments and automatic analysis between steps.</p>
<p><strong>Proposed Solution</strong>:</p>
<div class="highlight"><pre><span></span><code><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">argorollouts.io/v1alpha1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">RolloutPlugin</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">simple-canary-rs</span>
<span class="nt">spec</span><span class="p">:</span>
<span class="w">  </span><span class="nt">workloadRef</span><span class="p">:</span>
<span class="w">    </span><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">apps/v1</span>
<span class="w">    </span><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Deployment</span>
<span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">canary-app</span>

<span class="w">  </span><span class="nt">plugin</span><span class="p">:</span>
<span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Deployment</span>
<span class="w">    </span><span class="nt">verify</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">    </span><span class="nt">sha256</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;abc123...&quot;</span>
<span class="w">    </span><span class="nt">url</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;https://example.com/plugins/replicaset&quot;</span>
<span class="w">    </span><span class="nt">config</span><span class="p">:</span>
<span class="w">      </span><span class="nt">revisionHistoryLimit</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">3</span>

<span class="w">  </span><span class="nt">strategy</span><span class="p">:</span>
<span class="w">    </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Canary</span>
<span class="w">    </span><span class="nt">canary</span><span class="p">:</span>
<span class="w">      </span><span class="nt">steps</span><span class="p">:</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">setWeight</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">20</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">pause</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{</span><span class="nt">duration</span><span class="p">:</span><span class="w"> </span><span class="nv">10m</span><span class="p p-Indicator">}</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">analysis</span><span class="p">:</span>
<span class="w">            </span><span class="nt">templates</span><span class="p">:</span>
<span class="w">              </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">templateName</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">success-rate</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">setWeight</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">40</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">pause</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{</span><span class="nt">duration</span><span class="p">:</span><span class="w"> </span><span class="nv">10m</span><span class="p p-Indicator">}</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">setWeight</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">60</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">analysis</span><span class="p">:</span>
<span class="w">            </span><span class="nt">templates</span><span class="p">:</span>
<span class="w">              </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">templateName</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">success-rate</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">setWeight</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">100</span>
</code></pre></div>
<h3 id="use-case-2-simple-bluegreen-deployment-with-replicasets">Use Case 2: Simple Blue/Green Deployment with ReplicaSets<a class="headerlink" href="#use-case-2-simple-bluegreen-deployment-with-replicasets" title="Permanent link">&para;</a></h3>
<p><strong>Current Challenge</strong>: A team wants a simple way to implement blue/green deployments for a service that requires zero-downtime updates with a preview environment.</p>
<p><strong>Proposed Solution</strong>:</p>
<div class="highlight"><pre><span></span><code><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">argorollouts.io/v1alpha1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">RolloutPlugin</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bluegreen-rs</span>
<span class="nt">spec</span><span class="p">:</span>
<span class="w">  </span><span class="nt">workloadRef</span><span class="p">:</span>
<span class="w">    </span><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">apps/v1</span>
<span class="w">    </span><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Deployment</span>
<span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bluegreen-app</span>

<span class="w">  </span><span class="nt">plugin</span><span class="p">:</span>
<span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Deployment</span>
<span class="w">    </span><span class="nt">verify</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">    </span><span class="nt">sha256</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;abc123...&quot;</span>
<span class="w">    </span><span class="nt">url</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;https://example.com/plugins/replicaset&quot;</span>

<span class="w">  </span><span class="nt">strategy</span><span class="p">:</span>
<span class="w">    </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">BlueGreen</span>
<span class="w">    </span><span class="nt">blueGreen</span><span class="p">:</span>
<span class="w">      </span><span class="nt">activeService</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bluegreen-active</span>
<span class="w">      </span><span class="nt">previewService</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bluegreen-preview</span>
<span class="w">      </span><span class="nt">autoPromotionEnabled</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="w">      </span><span class="nt">prePromotionAnalysis</span><span class="p">:</span>
<span class="w">        </span><span class="nt">templates</span><span class="p">:</span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">templateName</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">http-success-rate</span>
<span class="w">      </span><span class="nt">scaleDownDelaySeconds</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">300</span>
</code></pre></div>
<p>These use cases demonstrate how the RolloutPlugin approach can directly manage ReplicaSets to implement controlled rollout strategies. The plugin architecture enables precise control over the ReplicaSet lifecycle while maintaining the core rollout functionality.</p>
<h2 id="advantages-of-the-rolloutplugin-controller-approach">Advantages of the RolloutPlugin Controller Approach<a class="headerlink" href="#advantages-of-the-rolloutplugin-controller-approach" title="Permanent link">&para;</a></h2>
<ul>
<li><strong>Clean separation from existing controller</strong>: No risk of affecting existing Rollout functionality</li>
<li><strong>Resource-specific optimizations</strong>: Can be optimized specifically for different resource types</li>
<li><strong>Easier to implement resource-specific features</strong>: Dedicated controller allows for resource-specific features without complicating the core Rollouts controller</li>
<li><strong>Independent evolution</strong>: Can evolve independently from the existing Rollouts controller</li>
<li><strong>Clear plugin boundaries</strong>: Well-defined interface for plugin developers</li>
</ul>
<h2 id="security-considerations">Security Considerations<a class="headerlink" href="#security-considerations" title="Permanent link">&para;</a></h2>
<ul>
<li>Resource plugins run with the same permissions as the controller</li>
<li>Consider limiting plugin scope with RBAC</li>
<li>Validate plugin binaries with checksums</li>
</ul>
<h2 id="risks-and-mitigations">Risks and Mitigations<a class="headerlink" href="#risks-and-mitigations" title="Permanent link">&para;</a></h2>
<ol>
<li>
<p><strong>Risk</strong>: Data loss during StatefulSet updates
   <strong>Mitigation</strong>: Clear documentation and guidance on PVC handling</p>
</li>
<li>
<p><strong>Risk</strong>: Service disruption during updates
   <strong>Mitigation</strong>: Conservative default settings and thorough analysis templates</p>
</li>
<li>
<p><strong>Risk</strong>: Plugin stability affecting controller
   <strong>Mitigation</strong>: Proper error handling and isolation in plugin execution</p>
</li>
</ol>
<h2 id="conclusion">Conclusion<a class="headerlink" href="#conclusion" title="Permanent link">&para;</a></h2>
<p>This proposal defines plugin architectures for extending Argo Rollouts to support multiple resource types, with an initial focus on StatefulSets. This approach provides a way to manage advanced deployment strategies for various Kubernetes resources, allowing users to apply consistent rollout patterns across their entire infrastructure.</p>
<p>The StatefulSet implementation demonstrates how existing Kubernetes capabilities (the partition field) can be leveraged to provide advanced deployment strategies, while this architecture also ensures that future resource types can be supported with minimal changes to existing code.</p>
<h2 id="references">References<a class="headerlink" href="#references" title="Permanent link">&para;</a></h2>
<ol>
<li>Kubernetes StatefulSet documentation: <a href="https://kubernetes.io/docs/concepts/workloads/controllers/statefulset/">https://kubernetes.io/docs/concepts/workloads/controllers/statefulset/</a></li>
<li>Kubernetes StatefulSet update strategies: <a href="https://kubernetes.io/docs/tutorials/stateful-application/basic-stateful-set/#updating-statefulsets">https://kubernetes.io/docs/tutorials/stateful-application/basic-stateful-set/#updating-statefulsets</a></li>
<li>Argo Rollouts plugin architecture: <a href="https://argoproj.github.io/argo-rollouts/plugins/">https://argoproj.github.io/argo-rollouts/plugins/</a></li>
<li>HashiCorp go-plugin library: <a href="https://github.com/hashicorp/go-plugin">https://github.com/hashicorp/go-plugin</a></li>
</ol>
<h2 id="archive-alternative-approach-considered">Archive: Alternative Approach Considered<a class="headerlink" href="#archive-alternative-approach-considered" title="Permanent link">&para;</a></h2>
<h3 id="approach-1-resource-plugin-extension-not-selected">Approach 1: Resource Plugin Extension (Not Selected)<a class="headerlink" href="#approach-1-resource-plugin-extension-not-selected" title="Permanent link">&para;</a></h3>
<p>This approach was considered but not selected. It would have extended the existing Rollouts controller with a resource plugin system, allowing the current Rollout CRD to manage different resource types.</p>
<p><strong>Why Not Selected:</strong></p>
<ul>
<li>Higher risk of affecting existing functionality</li>
<li>Potentially more complex controller code</li>
<li>Tighter coupling with existing Rollouts implementation</li>
</ul>
<p><strong>Advantages:</strong></p>
<ul>
<li>Unified user experience with existing Rollouts</li>
<li>Single controller to maintain</li>
<li>Reuses existing CLI commands and UI</li>
</ul>
<h4 id="generic-resource-plugin-interface">Generic Resource Plugin Interface<a class="headerlink" href="#generic-resource-plugin-interface" title="Permanent link">&para;</a></h4>
<p>The core of this approach was a plugin interface with methods generic enough to work with any Kubernetes resource type and support both canary and blue-green deployment strategies:</p>
<div class="highlight"><pre><span></span><code><span class="c1">// ResourcePhase defines the possible phases of a resource operation</span>
<span class="kd">type</span><span class="w"> </span><span class="nx">ResourcePhase</span><span class="w"> </span><span class="kt">string</span>

<span class="kd">const</span><span class="w"> </span><span class="p">(</span>
<span class="w">  </span><span class="nx">ResourcePhaseRunning</span><span class="w">     </span><span class="nx">ResourcePhase</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">&quot;Running&quot;</span>
<span class="w">  </span><span class="nx">ResourcePhaseSuccessful</span><span class="w">  </span><span class="nx">ResourcePhase</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">&quot;Successful&quot;</span>
<span class="w">  </span><span class="nx">ResourcePhaseFailed</span><span class="w">      </span><span class="nx">ResourcePhase</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">&quot;Failed&quot;</span>
<span class="w">  </span><span class="nx">ResourcePhaseError</span><span class="w">       </span><span class="nx">ResourcePhase</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">&quot;Error&quot;</span>
<span class="p">)</span>

<span class="c1">// ResourceContext contains information and configuration for resource plugin operations</span>
<span class="kd">type</span><span class="w"> </span><span class="nx">ResourceContext</span><span class="w"> </span><span class="kd">struct</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="c1">// Plugin name</span>
<span class="w">  </span><span class="nx">PluginName</span><span class="w"> </span><span class="kt">string</span>

<span class="w">  </span><span class="c1">// Configuration for the plugin operation</span>
<span class="w">  </span><span class="nx">Config</span><span class="w"> </span><span class="kd">map</span><span class="p">[</span><span class="kt">string</span><span class="p">]</span><span class="kd">interface</span><span class="p">{}</span>

<span class="w">  </span><span class="c1">// Status carries persisted state between operations</span>
<span class="w">  </span><span class="nx">Status</span><span class="w"> </span><span class="kd">map</span><span class="p">[</span><span class="kt">string</span><span class="p">]</span><span class="kd">interface</span><span class="p">{}</span>
<span class="p">}</span>

<span class="c1">// ResourceStatus represents the status of a resource plugin operation</span>
<span class="kd">type</span><span class="w"> </span><span class="nx">ResourceStatus</span><span class="w"> </span><span class="kd">struct</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="c1">// Resource identifier (e.g. hash of the spec)</span>
<span class="w">  </span><span class="nx">ResourceId</span><span class="w"> </span><span class="kt">string</span>

<span class="w">  </span><span class="c1">// The current phase of the operation</span>
<span class="w">  </span><span class="nx">Phase</span><span class="w"> </span><span class="nx">ResourcePhase</span>

<span class="w">  </span><span class="c1">// Human-readable message about the operation</span>
<span class="w">  </span><span class="nx">Message</span><span class="w"> </span><span class="kt">string</span>

<span class="w">  </span><span class="c1">// Start time of the operation</span>
<span class="w">  </span><span class="nx">StartedAt</span><span class="w"> </span><span class="o">*</span><span class="nx">metav1</span><span class="p">.</span><span class="nx">Time</span>

<span class="w">  </span><span class="c1">// Finish time of the operation</span>
<span class="w">  </span><span class="nx">FinishedAt</span><span class="w"> </span><span class="o">*</span><span class="nx">metav1</span><span class="p">.</span><span class="nx">Time</span>

<span class="w">  </span><span class="c1">// Resource-specific status information (persisted between operations)</span>
<span class="w">  </span><span class="nx">Status</span><span class="w"> </span><span class="kd">map</span><span class="p">[</span><span class="kt">string</span><span class="p">]</span><span class="kd">interface</span><span class="p">{}</span>

<span class="w">  </span><span class="c1">// Wait time before checking status again for incomplete operations</span>
<span class="w">  </span><span class="nx">RequeueAfter</span><span class="w"> </span><span class="nx">time</span><span class="p">.</span><span class="nx">Duration</span>
<span class="p">}</span>

<span class="c1">// ResourceResult contains the result of a plugin operation</span>
<span class="kd">type</span><span class="w"> </span><span class="nx">ResourceResult</span><span class="w"> </span><span class="kd">struct</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="c1">// The resulting phase of the operation</span>
<span class="w">  </span><span class="nx">Phase</span><span class="w"> </span><span class="nx">ResourcePhase</span>

<span class="w">  </span><span class="c1">// Human-readable message about the operation result</span>
<span class="w">  </span><span class="nx">Message</span><span class="w"> </span><span class="kt">string</span>

<span class="w">  </span><span class="c1">// Resource-specific status information to persist</span>
<span class="w">  </span><span class="nx">Status</span><span class="w"> </span><span class="kd">map</span><span class="p">[</span><span class="kt">string</span><span class="p">]</span><span class="kd">interface</span><span class="p">{}</span>

<span class="w">  </span><span class="c1">// Wait time before executing the operation again for incomplete operations</span>
<span class="w">  </span><span class="nx">RequeueAfter</span><span class="w"> </span><span class="nx">time</span><span class="p">.</span><span class="nx">Duration</span>
<span class="p">}</span>

<span class="kd">type</span><span class="w"> </span><span class="nx">ResourcePlugin</span><span class="w"> </span><span class="kd">interface</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="c1">// Initialize the plugin</span>
<span class="w">  </span><span class="nx">Init</span><span class="p">()</span><span class="w"> </span><span class="kt">error</span>

<span class="w">  </span><span class="c1">// CreateResource creates or ensures a resource with the given role exists</span>
<span class="w">  </span><span class="c1">// role can be &quot;stable&quot;, &quot;canary&quot;, &quot;preview&quot;, &quot;active&quot;, etc.</span>
<span class="w">  </span><span class="nx">CreateResource</span><span class="p">(</span><span class="w"> </span><span class="nx">rollout</span><span class="w"> </span><span class="o">*</span><span class="nx">v1alpha1</span><span class="p">.</span><span class="nx">Rollout</span><span class="p">,</span><span class="w"> </span><span class="nx">resourceContext</span><span class="w"> </span><span class="o">*</span><span class="nx">ResourceContext</span><span class="p">,</span><span class="w"> </span><span class="nx">role</span><span class="w"> </span><span class="kt">string</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="nx">ResourceResult</span><span class="p">,</span><span class="w"> </span><span class="kt">error</span><span class="p">)</span>

<span class="w">  </span><span class="c1">// UpdateResource updates a resource with the given role</span>
<span class="w">  </span><span class="c1">// role can be &quot;stable&quot;, &quot;canary&quot;, &quot;preview&quot;, &quot;active&quot;, etc.</span>
<span class="w">  </span><span class="nx">UpdateResource</span><span class="p">(</span><span class="w"> </span><span class="nx">rollout</span><span class="w"> </span><span class="o">*</span><span class="nx">v1alpha1</span><span class="p">.</span><span class="nx">Rollout</span><span class="p">,</span><span class="w"> </span><span class="nx">resourceContext</span><span class="w"> </span><span class="o">*</span><span class="nx">ResourceContext</span><span class="p">,</span><span class="w"> </span><span class="nx">role</span><span class="w"> </span><span class="kt">string</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="nx">ResourceResult</span><span class="p">,</span><span class="w"> </span><span class="kt">error</span><span class="p">)</span>

<span class="w">  </span><span class="c1">// ScaleResource scales a resource with the given role to the desired replica count</span>
<span class="w">  </span><span class="nx">ScaleResource</span><span class="p">(</span><span class="w"> </span><span class="nx">rollout</span><span class="w"> </span><span class="o">*</span><span class="nx">v1alpha1</span><span class="p">.</span><span class="nx">Rollout</span><span class="p">,</span><span class="w"> </span><span class="nx">resourceContext</span><span class="w"> </span><span class="o">*</span><span class="nx">ResourceContext</span><span class="p">,</span><span class="w"> </span><span class="nx">role</span><span class="w"> </span><span class="kt">string</span><span class="p">,</span><span class="w"> </span><span class="nx">replicas</span><span class="w"> </span><span class="kt">int32</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="nx">ResourceResult</span><span class="p">,</span><span class="w"> </span><span class="kt">error</span><span class="p">)</span>

<span class="w">  </span><span class="c1">// SetWeight updates the traffic weight between resources</span>
<span class="w">  </span><span class="c1">// For canary: percentage of traffic to canary</span>
<span class="w">  </span><span class="c1">// For blue-green: percentage of traffic to preview</span>
<span class="w">  </span><span class="nx">SetWeight</span><span class="p">(</span><span class="w"> </span><span class="nx">rollout</span><span class="w"> </span><span class="o">*</span><span class="nx">v1alpha1</span><span class="p">.</span><span class="nx">Rollout</span><span class="p">,</span><span class="w"> </span><span class="nx">resourceContext</span><span class="w"> </span><span class="o">*</span><span class="nx">ResourceContext</span><span class="p">,</span><span class="w"> </span><span class="nx">desiredWeight</span><span class="w"> </span><span class="kt">int32</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="nx">ResourceResult</span><span class="p">,</span><span class="w"> </span><span class="kt">error</span><span class="p">)</span>

<span class="w">  </span><span class="c1">// SwitchTrafficRoute changes the routing of traffic between resources</span>
<span class="w">  </span><span class="c1">// Particularly useful for blue-green to route traffic to preview</span>
<span class="w">  </span><span class="nx">SwitchTrafficRoute</span><span class="p">(</span><span class="w"> </span><span class="nx">rollout</span><span class="w"> </span><span class="o">*</span><span class="nx">v1alpha1</span><span class="p">.</span><span class="nx">Rollout</span><span class="p">,</span><span class="w"> </span><span class="nx">resourceContext</span><span class="w"> </span><span class="o">*</span><span class="nx">ResourceContext</span><span class="p">,</span><span class="w"> </span><span class="nx">options</span><span class="w"> </span><span class="kd">map</span><span class="p">[</span><span class="kt">string</span><span class="p">]</span><span class="kt">string</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="nx">ResourceResult</span><span class="p">,</span><span class="w"> </span><span class="kt">error</span><span class="p">)</span>

<span class="w">  </span><span class="c1">// PromoteResource promotes a resource to become the new stable/active version</span>
<span class="w">  </span><span class="c1">// For canary: promotes canary to stable</span>
<span class="w">  </span><span class="c1">// For blue-green: promotes preview to active</span>
<span class="w">  </span><span class="nx">PromoteResource</span><span class="p">(</span><span class="w"> </span><span class="nx">rollout</span><span class="w"> </span><span class="o">*</span><span class="nx">v1alpha1</span><span class="p">.</span><span class="nx">Rollout</span><span class="p">,</span><span class="w"> </span><span class="nx">resourceContext</span><span class="w"> </span><span class="o">*</span><span class="nx">ResourceContext</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="nx">ResourceResult</span><span class="p">,</span><span class="w"> </span><span class="kt">error</span><span class="p">)</span>

<span class="w">  </span><span class="c1">// Terminate stops an uncompleted operation </span>
<span class="w">  </span><span class="nx">Terminate</span><span class="p">(</span><span class="w"> </span><span class="nx">rollout</span><span class="w"> </span><span class="o">*</span><span class="nx">v1alpha1</span><span class="p">.</span><span class="nx">Rollout</span><span class="p">,</span><span class="w"> </span><span class="nx">resourceContext</span><span class="w"> </span><span class="o">*</span><span class="nx">ResourceContext</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="nx">ResourceResult</span><span class="p">,</span><span class="w"> </span><span class="kt">error</span><span class="p">)</span>

<span class="w">  </span><span class="c1">// VerifyWeight verifies if the desired weight distribution has been achieved</span>
<span class="w">  </span><span class="nx">VerifyWeight</span><span class="p">(</span><span class="w"> </span><span class="nx">rollout</span><span class="w"> </span><span class="o">*</span><span class="nx">v1alpha1</span><span class="p">.</span><span class="nx">Rollout</span><span class="p">,</span><span class="w"> </span><span class="nx">resourceContext</span><span class="w"> </span><span class="o">*</span><span class="nx">ResourceContext</span><span class="p">,</span><span class="w"> </span><span class="nx">desiredWeight</span><span class="w"> </span><span class="kt">int32</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="kt">bool</span><span class="p">,</span><span class="w"> </span><span class="kt">error</span><span class="p">)</span>

<span class="w">  </span><span class="c1">// IsResourceReady returns whether a specific resource is considered ready</span>
<span class="w">  </span><span class="nx">IsResourceReady</span><span class="p">(</span><span class="w"> </span><span class="nx">rollout</span><span class="w"> </span><span class="o">*</span><span class="nx">v1alpha1</span><span class="p">.</span><span class="nx">Rollout</span><span class="p">,</span><span class="w"> </span><span class="nx">resourceContext</span><span class="w"> </span><span class="o">*</span><span class="nx">ResourceContext</span><span class="p">,</span><span class="w"> </span><span class="nx">role</span><span class="w"> </span><span class="kt">string</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="kt">bool</span><span class="p">,</span><span class="w"> </span><span class="kt">error</span><span class="p">)</span>

<span class="w">  </span><span class="c1">// Type returns the type/name of the resource plugin</span>
<span class="w">  </span><span class="nx">Type</span><span class="p">()</span><span class="w"> </span><span class="kt">string</span>

<span class="w">  </span><span class="c1">// SupportsStrategy returns whether the plugin supports a given deployment strategy</span>
<span class="w">  </span><span class="nx">SupportsStrategy</span><span class="p">(</span><span class="nx">strategy</span><span class="w"> </span><span class="nx">StrategyType</span><span class="p">)</span><span class="w"> </span><span class="kt">bool</span>
<span class="p">}</span>
</code></pre></div>
<h4 id="extended-rollout-spec">Extended Rollout Spec<a class="headerlink" href="#extended-rollout-spec" title="Permanent link">&para;</a></h4>
<p>The Rollout spec would be extended with a resourcePlugin field:</p>
<div class="highlight"><pre><span></span><code><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">argoproj.io/v1alpha1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Rollout</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">statefulset-rollout</span>
<span class="nt">spec</span><span class="p">:</span>
<span class="w">  </span><span class="nt">replicas</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">5</span>
<span class="w">  </span><span class="nt">workloadRef</span><span class="p">:</span>
<span class="w">    </span><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">apps/v1</span>
<span class="w">    </span><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">StatefulSet</span>
<span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my-statefulset</span>

<span class="w">  </span><span class="nt">resourcePlugin</span><span class="p">:</span>
<span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">statefulset</span>
<span class="w">    </span><span class="nt">config</span><span class="p">:</span>
<span class="w">      </span><span class="c1"># Optional plugin-specific configuration</span>
<span class="w">      </span><span class="nt">volumeClaimTemplates</span><span class="p">:</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">metadata</span><span class="p">:</span>
<span class="w">            </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">data</span>
<span class="w">          </span><span class="nt">spec</span><span class="p">:</span>
<span class="w">            </span><span class="nt">accessModes</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;ReadWriteOnce&quot;</span><span class="p p-Indicator">]</span>
<span class="w">            </span><span class="nt">resources</span><span class="p">:</span>
<span class="w">              </span><span class="nt">requests</span><span class="p">:</span>
<span class="w">                </span><span class="nt">storage</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1Gi</span>

<span class="w">  </span><span class="nt">strategy</span><span class="p">:</span>
<span class="w">    </span><span class="c1"># Existing strategy remains unchanged</span>
<span class="w">    </span><span class="nt">canary</span><span class="p">:</span>
<span class="w">      </span><span class="nt">steps</span><span class="p">:</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">setWeight</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">20</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">pause</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{</span><span class="nt">duration</span><span class="p">:</span><span class="w"> </span><span class="nv">1h</span><span class="p p-Indicator">}</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">setWeight</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">40</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">pause</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{</span><span class="nt">duration</span><span class="p">:</span><span class="w"> </span><span class="nv">1h</span><span class="p p-Indicator">}</span>
</code></pre></div>
<h4 id="rollout-status-extensions">Rollout Status Extensions<a class="headerlink" href="#rollout-status-extensions" title="Permanent link">&para;</a></h4>
<p>The Rollout status would be extended with a resourcePluginStatus field:</p>
<div class="highlight"><pre><span></span><code><span class="nt">status</span><span class="p">:</span>
<span class="w">  </span><span class="nt">canary</span><span class="p">:</span>
<span class="w">    </span><span class="nt">resourcePluginStatus</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">statefulset</span>
<span class="w">        </span><span class="nt">message</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Updated</span><span class="nv"> </span><span class="s">partition</span><span class="nv"> </span><span class="s">to</span><span class="nv"> </span><span class="s">3</span><span class="nv"> </span><span class="s">(60%)&quot;</span>
<span class="w">        </span><span class="nt">phase</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Running</span>
<span class="w">        </span><span class="nt">startedAt</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;2025-08-03T12:00:00Z&quot;</span>
<span class="w">        </span><span class="nt">status</span><span class="p">:</span>
<span class="w">          </span><span class="nt">partition</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">3</span>
<span class="w">          </span><span class="nt">currentReplicas</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">3</span>
<span class="w">          </span><span class="nt">updatedReplicas</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2</span>
</code></pre></div>
<h4 id="example-use-cases-for-approach-1">Example Use Cases for Approach 1<a class="headerlink" href="#example-use-cases-for-approach-1" title="Permanent link">&para;</a></h4>
<h5 id="statefulset-canary-with-extended-rollout">StatefulSet Canary with Extended Rollout<a class="headerlink" href="#statefulset-canary-with-extended-rollout" title="Permanent link">&para;</a></h5>
<div class="highlight"><pre><span></span><code><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">argoproj.io/v1alpha1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Rollout</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">mongodb-rollout</span>
<span class="nt">spec</span><span class="p">:</span>
<span class="w">  </span><span class="nt">replicas</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">5</span>
<span class="w">  </span><span class="nt">workloadRef</span><span class="p">:</span>
<span class="w">    </span><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">apps/v1</span>
<span class="w">    </span><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">StatefulSet</span>
<span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">mongodb</span>

<span class="w">  </span><span class="nt">resourcePlugin</span><span class="p">:</span>
<span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">statefulset</span>

<span class="w">  </span><span class="nt">strategy</span><span class="p">:</span>
<span class="w">    </span><span class="nt">canary</span><span class="p">:</span>
<span class="w">      </span><span class="nt">steps</span><span class="p">:</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">setWeight</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">20</span><span class="w">  </span><span class="c1"># Update 1 replica (partition=4)</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">pause</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{</span><span class="nt">duration</span><span class="p">:</span><span class="w"> </span><span class="nv">2h</span><span class="p p-Indicator">}</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">analysis</span><span class="p">:</span>
<span class="w">            </span><span class="nt">templates</span><span class="p">:</span>
<span class="w">              </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">templateName</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">mongodb-metrics</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">setWeight</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">40</span><span class="w">  </span><span class="c1"># Update 2 replicas (partition=3)</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">pause</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{</span><span class="nt">duration</span><span class="p">:</span><span class="w"> </span><span class="nv">2h</span><span class="p p-Indicator">}</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">setWeight</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">100</span><span class="w"> </span><span class="c1"># Update all replicas (partition=0)</span>
</code></pre></div>
<h5 id="statefulset-bluegreen-with-extended-rollout">StatefulSet Blue/Green with Extended Rollout<a class="headerlink" href="#statefulset-bluegreen-with-extended-rollout" title="Permanent link">&para;</a></h5>
<div class="highlight"><pre><span></span><code><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">argoproj.io/v1alpha1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Rollout</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">kafka-rollout</span>
<span class="nt">spec</span><span class="p">:</span>
<span class="w">  </span><span class="nt">replicas</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">3</span>
<span class="w">  </span><span class="nt">workloadRef</span><span class="p">:</span>
<span class="w">    </span><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">apps/v1</span>
<span class="w">    </span><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">StatefulSet</span>
<span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">kafka</span>

<span class="w">  </span><span class="nt">resourcePlugin</span><span class="p">:</span>
<span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">statefulset</span>

<span class="w">  </span><span class="nt">strategy</span><span class="p">:</span>
<span class="w">    </span><span class="nt">blueGreen</span><span class="p">:</span>
<span class="w">      </span><span class="nt">activeService</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">kafka-active</span>
<span class="w">      </span><span class="nt">previewService</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">kafka-preview</span>
<span class="w">      </span><span class="nt">autoPromotionEnabled</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="w">      </span><span class="nt">previewReplicaCount</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">3</span>
<span class="w">      </span><span class="nt">scaleDownDelaySeconds</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">600</span>
<span class="w">      </span><span class="nt">analysis</span><span class="p">:</span>
<span class="w">        </span><span class="nt">templates</span><span class="p">:</span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">templateName</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">kafka-metrics</span>
</code></pre></div>
<h5 id="replicaset-canary-with-extended-rollout">ReplicaSet Canary with Extended Rollout<a class="headerlink" href="#replicaset-canary-with-extended-rollout" title="Permanent link">&para;</a></h5>
<div class="highlight"><pre><span></span><code><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">argoproj.io/v1alpha1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Rollout</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">simple-replicaset-canary</span>
<span class="nt">spec</span><span class="p">:</span>
<span class="w">  </span><span class="nt">replicas</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">10</span>

<span class="w">  </span><span class="nt">resourcePlugin</span><span class="p">:</span>
<span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">replicaset</span>
<span class="w">    </span><span class="nt">config</span><span class="p">:</span>
<span class="w">      </span><span class="nt">revisionHistoryLimit</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">3</span>

<span class="w">  </span><span class="nt">selector</span><span class="p">:</span>
<span class="w">    </span><span class="nt">matchLabels</span><span class="p">:</span>
<span class="w">      </span><span class="nt">app</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">canary-app</span>

<span class="w">  </span><span class="nt">template</span><span class="p">:</span>
<span class="w">    </span><span class="nt">metadata</span><span class="p">:</span>
<span class="w">      </span><span class="nt">labels</span><span class="p">:</span>
<span class="w">        </span><span class="nt">app</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">canary-app</span>
<span class="w">    </span><span class="nt">spec</span><span class="p">:</span>
<span class="w">      </span><span class="nt">containers</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">app</span>
<span class="w">        </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">myapp:v2</span>
<span class="w">        </span><span class="nt">ports</span><span class="p">:</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">containerPort</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">8080</span>

<span class="w">  </span><span class="nt">strategy</span><span class="p">:</span>
<span class="w">    </span><span class="nt">canary</span><span class="p">:</span>
<span class="w">      </span><span class="nt">steps</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">setWeight</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">20</span><span class="w">  </span><span class="c1"># Create canary ReplicaSet with 2 replicas (20% of 10)</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">pause</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{</span><span class="nt">duration</span><span class="p">:</span><span class="w"> </span><span class="nv">10m</span><span class="p p-Indicator">}</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">analysis</span><span class="p">:</span>
<span class="w">          </span><span class="nt">templates</span><span class="p">:</span>
<span class="w">            </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">templateName</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">success-rate</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">setWeight</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">40</span><span class="w">  </span><span class="c1"># Scale canary ReplicaSet to 4 replicas (40% of 10)</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">pause</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{</span><span class="nt">duration</span><span class="p">:</span><span class="w"> </span><span class="nv">10m</span><span class="p p-Indicator">}</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">setWeight</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">60</span><span class="w">  </span><span class="c1"># Scale canary ReplicaSet to 6 replicas (60% of 10) </span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">analysis</span><span class="p">:</span>
<span class="w">          </span><span class="nt">templates</span><span class="p">:</span>
<span class="w">            </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">templateName</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">success-rate</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">setWeight</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">100</span><span class="w"> </span><span class="c1"># Scale canary ReplicaSet to 10 replicas, scale down stable</span>
</code></pre></div>
<h5 id="replicaset-bluegreen-with-extended-rollout">ReplicaSet Blue/Green with Extended Rollout<a class="headerlink" href="#replicaset-bluegreen-with-extended-rollout" title="Permanent link">&para;</a></h5>
<div class="highlight"><pre><span></span><code><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">argoproj.io/v1alpha1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Rollout</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bluegreen-replicaset</span>
<span class="nt">spec</span><span class="p">:</span>
<span class="w">  </span><span class="nt">replicas</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">5</span>

<span class="w">  </span><span class="nt">resourcePlugin</span><span class="p">:</span>
<span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">replicaset</span>

<span class="w">  </span><span class="nt">selector</span><span class="p">:</span>
<span class="w">    </span><span class="nt">matchLabels</span><span class="p">:</span>
<span class="w">      </span><span class="nt">app</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bluegreen-app</span>

<span class="w">  </span><span class="nt">template</span><span class="p">:</span>
<span class="w">    </span><span class="nt">metadata</span><span class="p">:</span>
<span class="w">      </span><span class="nt">labels</span><span class="p">:</span>
<span class="w">        </span><span class="nt">app</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bluegreen-app</span>
<span class="w">    </span><span class="nt">spec</span><span class="p">:</span>
<span class="w">      </span><span class="nt">containers</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">app</span>
<span class="w">        </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">myapp:v2</span>
<span class="w">        </span><span class="nt">ports</span><span class="p">:</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">containerPort</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">8080</span>

<span class="w">  </span><span class="nt">strategy</span><span class="p">:</span>
<span class="w">    </span><span class="nt">blueGreen</span><span class="p">:</span>
<span class="w">      </span><span class="nt">activeService</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bluegreen-active</span>
<span class="w">      </span><span class="nt">previewService</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bluegreen-preview</span>
<span class="w">      </span><span class="nt">autoPromotionEnabled</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="w">      </span><span class="nt">prePromotionAnalysis</span><span class="p">:</span>
<span class="w">        </span><span class="nt">templates</span><span class="p">:</span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">templateName</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">http-success-rate</span>
<span class="w">      </span><span class="nt">scaleDownDelaySeconds</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">300</span>
</code></pre></div>







  
  



  




                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": "../..", "features": [], "search": "../../assets/javascripts/workers/search.7a47a382.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.e71a0d61.min.js"></script>
      
        <script src="../../assets/versions.js"></script>
      
    
  </body>
</html>