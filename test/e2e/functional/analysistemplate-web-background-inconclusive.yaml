# A web metric which uses Google Books API (returns JSON)
# The conditions check for values that won't match the actual response,
# causing measurements to be inconclusive (neither success nor failure)
apiVersion: argoproj.io/v1alpha1
kind: AnalysisTemplate
metadata:
  name: web-background-inconclusive
spec:
  args:
    - name: url-val
      value: "https://www.googleapis.com/books/v1/volumes?q=isbn:0747532699"
  metrics:
    - name: web
      interval: 5s
      inconclusiveLimit: 3
      successCondition: result.kind == "will-never-match"
      failureCondition: result.kind == "also-will-never-match"
      provider:
        web:
          url: "{{args.url-val}}"
