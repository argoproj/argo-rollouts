# A web metric which uses Google Public DNS-over-HTTPS API (returns JSON)
# The conditions check for values that won't match the actual response,
# causing measurements to be inconclusive (neither success nor failure)
apiVersion: argoproj.io/v1alpha1
kind: AnalysisTemplate
metadata:
  name: web-background-inconclusive
spec:
  args:
    - name: url-val
      value: "https://dns.google/resolve?name=google.com"
  metrics:
    - name: web
      interval: 5s
      inconclusiveLimit: 3
      successCondition: result.Status == 999
      failureCondition: result.Status == -1
      provider:
        web:
          url: "{{args.url-val}}"
