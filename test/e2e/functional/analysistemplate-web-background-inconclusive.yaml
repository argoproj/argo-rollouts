# A web metric which uses the kubernetes API server as a metric provider
# The conditions are designed to always be inconclusive (neither success nor failure)
apiVersion: argoproj.io/v1alpha1
kind: AnalysisTemplate
metadata:
  name: web-background-inconclusive
spec:
  metrics:
    - name: web
      interval: 5s
      inconclusiveLimit: 1
      # These conditions will never match the /version response, causing inconclusive results
      successCondition: result.major == 'never-match-success'
      failureCondition: result.major == 'never-match-failure'
      provider:
        web:
          url: "https://kubernetes.default.svc/version"
          insecure: true
