apiVersion: argoproj.io/v1alpha1
kind: Experiment
metadata:
  generateName: experiment-mann-whitney-u-
spec:
  duration: 3600
  templates:
  - name: baseline
    spec:
      containers:
      - name: guestbook
        image: guesbook:v1
  - name: canary
    spec:
      containers:
      - name: guestbook
        image: guesbook:v2
  analyses:
  # success-rate starts at the beginning of the experiment, and is terminated at the end of the
  # experiment. If the analysis run fails/errors before the experiment duration, the experiment is
  # terminated prematurely, and will .
  - templateName: success-rate
    executionPhase: During
  # mann-whitney runs at the end of the experiment, indicated by the `executionPhase: Post`.
  # 
  - templateName: mann-whitney
    executionPhase: Post
status:
  status: Successful
  analysisRuns:
  - name: success-rate
    analysisRunName: experiment-mann-whitney-u-success-rate-ab13d13
    status: Successful
  - name: mann-whitney
    status: Failed


---
kind: AnalysisTemplate
apiVersion: argoproj.io/v1alpha1
metadata:
  name: mann-whitney
spec:
  metrics:
  - name: test
    provider:
      job:
        spec:
          template:
            spec:
              containers:
              - name: sleep
                image: alpine:3.8
                command: [sleep, "30"]
              restartPolicy: Never
          backoffLimit: 0
