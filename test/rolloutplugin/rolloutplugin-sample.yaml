apiVersion: argoproj.io/v1alpha1
kind: RolloutPlugin
metadata:
  name: test-statefulset-rollout
  namespace: argo-rollouts
spec:
  # Reference to the StatefulSet being managed
  workloadRef:
    apiVersion: apps/v1
    kind: StatefulSet
    name: test-sts
    # namespace is optional, defaults to RolloutPlugin's namespace
  
  # Plugin configuration
  plugin:
    name: statefulset
    # Optional: plugin-specific configuration
    config:
      # Any StatefulSet-specific settings
      a: b
  
  # Canary rollout strategy
  strategy:
    canary:
      steps:
        - setWeight: 20
        - pause: {duration: 30s}
        - setWeight: 40
        - pause: {duration: 30s}
        - setWeight: 60
        - pause: {duration: 30s}
        - setWeight: 80
        - pause: {duration: 30s}
        - setWeight: 100
